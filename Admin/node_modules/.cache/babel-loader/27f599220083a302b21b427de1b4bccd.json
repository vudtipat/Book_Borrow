{"ast":null,"code":"function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nimport classnames from 'classnames';\nimport classes from 'component-classes';\nimport Animate from 'rc-animate';\nimport { Item as MenuItem, ItemGroup as MenuItemGroup } from 'rc-menu';\nimport childrenToArray from \"rc-util/es/Children/toArray\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { polyfill } from 'react-lifecycles-compat';\nimport warning from 'warning';\nimport Option from './Option';\nimport SelectPropTypes from './PropTypes';\nimport SelectTrigger from './SelectTrigger';\nimport { defaultFilterFn, findFirstMenuItem, findIndexInValueBySingleValue, generateUUID, getLabelFromPropsValue, getMapKey, getPropValue, getValuePropValue, includesSeparators, isCombobox, isMultipleOrTags, isMultipleOrTagsOrCombobox, isSingleMode, preventDefaultEvent, saveRef, splitBySeparators, toArray, toTitle, UNSELECTABLE_ATTRIBUTE, UNSELECTABLE_STYLE, validateOptionValue } from './util';\nvar SELECT_EMPTY_VALUE_KEY = 'RC_SELECT_EMPTY_VALUE_KEY';\n\nvar noop = function noop() {\n  return null;\n};\n\nfunction chaining() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    } // tslint:disable-next-line:prefer-for-of\n\n\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i] && typeof fns[i] === 'function') {\n        fns[i].apply(chaining, args);\n      }\n    }\n  };\n}\n\nvar Select = /*#__PURE__*/function (_React$Component) {\n  _inherits(Select, _React$Component);\n\n  function Select(props) {\n    var _this;\n\n    _classCallCheck(this, Select);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Select).call(this, props));\n    _this.inputRef = null;\n    _this.inputMirrorRef = null;\n    _this.topCtrlRef = null;\n    _this.selectTriggerRef = null;\n    _this.rootRef = null;\n    _this.selectionRef = null;\n    _this.dropdownContainer = null;\n    _this.blurTimer = null;\n    _this.focusTimer = null; // tslint:disable-next-line:variable-name\n\n    _this._focused = false; // tslint:disable-next-line:variable-name\n\n    _this._mouseDown = false; // tslint:disable-next-line:variable-name\n\n    _this._options = []; // tslint:disable-next-line:variable-name\n\n    _this._empty = false;\n\n    _this.onInputChange = function (event) {\n      var tokenSeparators = _this.props.tokenSeparators;\n      var val = event.target.value;\n\n      if (isMultipleOrTags(_this.props) && tokenSeparators.length && includesSeparators(val, tokenSeparators)) {\n        var nextValue = _this.getValueByInput(val);\n\n        if (nextValue !== undefined) {\n          _this.fireChange(nextValue);\n        }\n\n        _this.setOpenState(false, true);\n\n        _this.setInputValue('', false);\n\n        return;\n      }\n\n      _this.setInputValue(val);\n\n      _this.setState({\n        open: true\n      });\n\n      if (isCombobox(_this.props)) {\n        _this.fireChange([val]);\n      }\n    };\n\n    _this.onDropdownVisibleChange = function (open) {\n      if (open && !_this._focused) {\n        _this.clearBlurTime();\n\n        _this.timeoutFocus();\n\n        _this._focused = true;\n\n        _this.updateFocusClassName();\n      }\n\n      _this.setOpenState(open);\n    }; // combobox ignore\n\n\n    _this.onKeyDown = function (event) {\n      var open = _this.state.open;\n      var disabled = _this.props.disabled;\n\n      if (disabled) {\n        return;\n      }\n\n      var keyCode = event.keyCode;\n\n      if (open && !_this.getInputDOMNode()) {\n        _this.onInputKeyDown(event);\n      } else if (keyCode === KeyCode.ENTER || keyCode === KeyCode.DOWN) {\n        if (!open) {\n          _this.setOpenState(true);\n        }\n\n        event.preventDefault();\n      } else if (keyCode === KeyCode.SPACE) {\n        // Not block space if popup is shown\n        if (!open) {\n          _this.setOpenState(true);\n\n          event.preventDefault();\n        }\n      }\n    };\n\n    _this.onInputKeyDown = function (event) {\n      var _this$props = _this.props,\n          disabled = _this$props.disabled,\n          combobox = _this$props.combobox;\n\n      if (disabled) {\n        return;\n      }\n\n      var state = _this.state;\n\n      var isRealOpen = _this.getRealOpenState(state); // magic code\n\n\n      var keyCode = event.keyCode;\n\n      if (isMultipleOrTags(_this.props) && !event.target.value && keyCode === KeyCode.BACKSPACE) {\n        event.preventDefault();\n        var value = state.value;\n\n        if (value.length) {\n          _this.removeSelected(value[value.length - 1]);\n        }\n\n        return;\n      }\n\n      if (keyCode === KeyCode.DOWN) {\n        if (!state.open) {\n          _this.openIfHasChildren();\n\n          event.preventDefault();\n          event.stopPropagation();\n          return;\n        }\n      } else if (keyCode === KeyCode.ENTER && state.open) {\n        // Aviod trigger form submit when select item\n        // https://github.com/ant-design/ant-design/issues/10861\n        // https://github.com/ant-design/ant-design/issues/14544\n        if (isRealOpen || !combobox) {\n          event.preventDefault();\n        }\n      } else if (keyCode === KeyCode.ESC) {\n        if (state.open) {\n          _this.setOpenState(false);\n\n          event.preventDefault();\n          event.stopPropagation();\n        }\n\n        return;\n      }\n\n      if (isRealOpen && _this.selectTriggerRef) {\n        var menu = _this.selectTriggerRef.getInnerMenu();\n\n        if (menu && menu.onKeyDown(event, _this.handleBackfill)) {\n          event.preventDefault();\n          event.stopPropagation();\n        }\n      }\n    };\n\n    _this.onMenuSelect = function (_ref) {\n      var item = _ref.item;\n\n      if (!item) {\n        return;\n      }\n\n      var value = _this.state.value;\n      var props = _this.props;\n      var selectedValue = getValuePropValue(item);\n      var lastValue = value[value.length - 1];\n\n      _this.fireSelect(selectedValue);\n\n      if (isMultipleOrTags(props)) {\n        if (findIndexInValueBySingleValue(value, selectedValue) !== -1) {\n          return;\n        }\n\n        value = value.concat([selectedValue]);\n      } else {\n        if (!isCombobox(props) && lastValue !== undefined && lastValue === selectedValue && selectedValue !== _this.state.backfillValue) {\n          _this.setOpenState(false, true);\n\n          return;\n        }\n\n        value = [selectedValue];\n\n        _this.setOpenState(false, true);\n      }\n\n      _this.fireChange(value);\n\n      var inputValue = isCombobox(props) ? getPropValue(item, props.optionLabelProp) : '';\n\n      if (props.autoClearSearchValue) {\n        _this.setInputValue(inputValue, false);\n      }\n    };\n\n    _this.onMenuDeselect = function (_ref2) {\n      var item = _ref2.item,\n          domEvent = _ref2.domEvent;\n\n      if (domEvent.type === 'keydown' && domEvent.keyCode === KeyCode.ENTER) {\n        _this.removeSelected(getValuePropValue(item));\n\n        return;\n      }\n\n      if (domEvent.type === 'click') {\n        _this.removeSelected(getValuePropValue(item));\n      }\n\n      var props = _this.props;\n\n      if (props.autoClearSearchValue) {\n        _this.setInputValue('', false);\n      }\n    };\n\n    _this.onArrowClick = function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (!_this.props.disabled) {\n        _this.setOpenState(!_this.state.open, !_this.state.open);\n      }\n    };\n\n    _this.onPlaceholderClick = function () {\n      if (_this.getInputDOMNode && _this.getInputDOMNode()) {\n        _this.getInputDOMNode().focus();\n      }\n    };\n\n    _this.onOuterFocus = function (e) {\n      if (_this.props.disabled) {\n        e.preventDefault();\n        return;\n      }\n\n      _this.clearBlurTime();\n\n      if (!isMultipleOrTagsOrCombobox(_this.props) && e.target === _this.getInputDOMNode()) {\n        return;\n      }\n\n      if (_this._focused) {\n        return;\n      }\n\n      _this._focused = true;\n\n      _this.updateFocusClassName(); // only effect multiple or tag mode\n\n\n      if (!isMultipleOrTags(_this.props) || !_this._mouseDown) {\n        _this.timeoutFocus();\n      }\n    };\n\n    _this.onPopupFocus = function () {\n      // fix ie scrollbar, focus element again\n      _this.maybeFocus(true, true);\n    };\n\n    _this.onOuterBlur = function (e) {\n      if (_this.props.disabled) {\n        e.preventDefault();\n        return;\n      }\n\n      _this.blurTimer = window.setTimeout(function () {\n        _this._focused = false;\n\n        _this.updateFocusClassName();\n\n        var props = _this.props;\n        var value = _this.state.value;\n        var inputValue = _this.state.inputValue;\n\n        if (isSingleMode(props) && props.showSearch && inputValue && props.defaultActiveFirstOption) {\n          var options = _this._options || [];\n\n          if (options.length) {\n            var firstOption = findFirstMenuItem(options);\n\n            if (firstOption) {\n              value = [getValuePropValue(firstOption)];\n\n              _this.fireChange(value);\n            }\n          }\n        } else if (isMultipleOrTags(props) && inputValue) {\n          if (_this._mouseDown) {\n            // need update dropmenu when not blur\n            _this.setInputValue('');\n          } else {\n            // why not use setState?\n            // https://github.com/ant-design/ant-design/issues/14262\n            _this.state.inputValue = '';\n\n            if (_this.getInputDOMNode && _this.getInputDOMNode()) {\n              _this.getInputDOMNode().value = '';\n            }\n          }\n\n          var tmpValue = _this.getValueByInput(inputValue);\n\n          if (tmpValue !== undefined) {\n            value = tmpValue;\n\n            _this.fireChange(value);\n          }\n        } // if click the rest space of Select in multiple mode\n\n\n        if (isMultipleOrTags(props) && _this._mouseDown) {\n          _this.maybeFocus(true, true);\n\n          _this._mouseDown = false;\n          return;\n        }\n\n        _this.setOpenState(false);\n\n        if (props.onBlur) {\n          props.onBlur(_this.getVLForOnChange(value));\n        }\n      }, 10);\n    };\n\n    _this.onClearSelection = function (event) {\n      var props = _this.props;\n      var state = _this.state;\n\n      if (props.disabled) {\n        return;\n      }\n\n      var inputValue = state.inputValue;\n      var value = state.value;\n      event.stopPropagation();\n\n      if (inputValue || value.length) {\n        if (value.length) {\n          _this.fireChange([]);\n        }\n\n        _this.setOpenState(false, true);\n\n        if (inputValue) {\n          _this.setInputValue('');\n        }\n      }\n    };\n\n    _this.onChoiceAnimationLeave = function () {\n      _this.forcePopupAlign();\n    };\n\n    _this.getOptionInfoBySingleValue = function (value, optionsInfo) {\n      var info;\n      optionsInfo = optionsInfo || _this.state.optionsInfo;\n\n      if (optionsInfo[getMapKey(value)]) {\n        info = optionsInfo[getMapKey(value)];\n      }\n\n      if (info) {\n        return info;\n      }\n\n      var defaultLabel = value;\n\n      if (_this.props.labelInValue) {\n        var label = getLabelFromPropsValue(_this.props.value, value);\n\n        if (label !== undefined) {\n          defaultLabel = label;\n        }\n      }\n\n      var defaultInfo = {\n        option: React.createElement(Option, {\n          value: value,\n          key: value\n        }, value),\n        value: value,\n        label: defaultLabel\n      };\n      return defaultInfo;\n    };\n\n    _this.getOptionBySingleValue = function (value) {\n      var _this$getOptionInfoBy = _this.getOptionInfoBySingleValue(value),\n          option = _this$getOptionInfoBy.option;\n\n      return option;\n    };\n\n    _this.getOptionsBySingleValue = function (values) {\n      return values.map(function (value) {\n        return _this.getOptionBySingleValue(value);\n      });\n    };\n\n    _this.getValueByLabel = function (label) {\n      if (label === undefined) {\n        return null;\n      }\n\n      var value = null;\n      Object.keys(_this.state.optionsInfo).forEach(function (key) {\n        var info = _this.state.optionsInfo[key];\n        var disabled = info.disabled;\n\n        if (disabled) {\n          return;\n        }\n\n        var oldLable = toArray(info.label);\n\n        if (oldLable && oldLable.join('') === label) {\n          value = info.value;\n        }\n      });\n      return value;\n    };\n\n    _this.getVLBySingleValue = function (value) {\n      if (_this.props.labelInValue) {\n        return {\n          key: value,\n          label: _this.getLabelBySingleValue(value)\n        };\n      }\n\n      return value;\n    };\n\n    _this.getVLForOnChange = function (vlsS) {\n      var vls = vlsS;\n\n      if (vls !== undefined) {\n        if (!_this.props.labelInValue) {\n          vls = vls.map(function (v) {\n            return v;\n          });\n        } else {\n          vls = vls.map(function (vl) {\n            return {\n              key: vl,\n              label: _this.getLabelBySingleValue(vl)\n            };\n          });\n        }\n\n        return isMultipleOrTags(_this.props) ? vls : vls[0];\n      }\n\n      return vls;\n    };\n\n    _this.getLabelBySingleValue = function (value, optionsInfo) {\n      var _this$getOptionInfoBy2 = _this.getOptionInfoBySingleValue(value, optionsInfo),\n          label = _this$getOptionInfoBy2.label;\n\n      return label;\n    };\n\n    _this.getDropdownContainer = function () {\n      if (!_this.dropdownContainer) {\n        _this.dropdownContainer = document.createElement('div');\n        document.body.appendChild(_this.dropdownContainer);\n      }\n\n      return _this.dropdownContainer;\n    };\n\n    _this.getPlaceholderElement = function () {\n      var props = _this.props;\n      var state = _this.state;\n      var hidden = false;\n\n      if (state.inputValue) {\n        hidden = true;\n      }\n\n      var value = state.value;\n\n      if (value.length) {\n        hidden = true;\n      }\n\n      if (isCombobox(props) && value.length === 1 && state.value && !state.value[0]) {\n        hidden = false;\n      }\n\n      var placeholder = props.placeholder;\n\n      if (placeholder) {\n        return React.createElement(\"div\", _extends({\n          onMouseDown: preventDefaultEvent,\n          style: _extends({\n            display: hidden ? 'none' : 'block'\n          }, UNSELECTABLE_STYLE)\n        }, UNSELECTABLE_ATTRIBUTE, {\n          onClick: _this.onPlaceholderClick,\n          className: \"\".concat(props.prefixCls, \"-selection__placeholder\")\n        }), placeholder);\n      }\n\n      return null;\n    };\n\n    _this.getInputElement = function () {\n      var props = _this.props;\n      var defaultInput = React.createElement(\"input\", {\n        id: props.id,\n        autoComplete: \"off\"\n      }); // tslint:disable-next-line:typedef-whitespace\n\n      var inputElement = props.getInputElement ? props.getInputElement() : defaultInput;\n      var inputCls = classnames(inputElement.props.className, _defineProperty({}, \"\".concat(props.prefixCls, \"-search__field\"), true)); // https://github.com/ant-design/ant-design/issues/4992#issuecomment-281542159\n      // Add space to the end of the inputValue as the width measurement tolerance\n\n      return React.createElement(\"div\", {\n        className: \"\".concat(props.prefixCls, \"-search__field__wrap\")\n      }, React.cloneElement(inputElement, {\n        ref: _this.saveInputRef,\n        onChange: _this.onInputChange,\n        onKeyDown: chaining(_this.onInputKeyDown, inputElement.props.onKeyDown, _this.props.onInputKeyDown),\n        value: _this.state.inputValue,\n        disabled: props.disabled,\n        className: inputCls\n      }), React.createElement(\"span\", {\n        ref: _this.saveInputMirrorRef,\n        className: \"\".concat(props.prefixCls, \"-search__field__mirror\")\n      }, _this.state.inputValue, \"\\xA0\"));\n    };\n\n    _this.getInputDOMNode = function () {\n      return _this.topCtrlRef ? _this.topCtrlRef.querySelector('input,textarea,div[contentEditable]') : _this.inputRef;\n    };\n\n    _this.getInputMirrorDOMNode = function () {\n      return _this.inputMirrorRef;\n    };\n\n    _this.getPopupDOMNode = function () {\n      if (_this.selectTriggerRef) {\n        return _this.selectTriggerRef.getPopupDOMNode();\n      }\n    };\n\n    _this.getPopupMenuComponent = function () {\n      if (_this.selectTriggerRef) {\n        return _this.selectTriggerRef.getInnerMenu();\n      }\n    };\n\n    _this.setOpenState = function (open, needFocus) {\n      var props = _this.props;\n      var state = _this.state;\n\n      if (state.open === open) {\n        _this.maybeFocus(open, !!needFocus);\n\n        return;\n      }\n\n      if (_this.props.onDropdownVisibleChange) {\n        _this.props.onDropdownVisibleChange(open);\n      }\n\n      var nextState = {\n        open: open,\n        backfillValue: ''\n      }; // clear search input value when open is false in singleMode.\n\n      if (!open && isSingleMode(props) && props.showSearch) {\n        _this.setInputValue('', false);\n      }\n\n      if (!open) {\n        _this.maybeFocus(open, !!needFocus);\n      }\n\n      _this.setState(_extends({\n        open: open\n      }, nextState), function () {\n        if (open) {\n          _this.maybeFocus(open, !!needFocus);\n        }\n      });\n    };\n\n    _this.setInputValue = function (inputValue) {\n      var fireSearch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (inputValue !== _this.state.inputValue) {\n        _this.setState({\n          inputValue: inputValue\n        }, _this.forcePopupAlign);\n\n        if (fireSearch && _this.props.onSearch) {\n          _this.props.onSearch(inputValue);\n        }\n      }\n    };\n\n    _this.getValueByInput = function (str) {\n      var _this$props2 = _this.props,\n          multiple = _this$props2.multiple,\n          tokenSeparators = _this$props2.tokenSeparators;\n      var nextValue = _this.state.value;\n      var hasNewValue = false;\n      splitBySeparators(str, tokenSeparators).forEach(function (label) {\n        var selectedValue = [label];\n\n        if (multiple) {\n          var value = _this.getValueByLabel(label);\n\n          if (value && findIndexInValueBySingleValue(nextValue, value) === -1) {\n            nextValue = nextValue.concat(value);\n            hasNewValue = true;\n\n            _this.fireSelect(value);\n          }\n        } else if (findIndexInValueBySingleValue(nextValue, label) === -1) {\n          nextValue = nextValue.concat(selectedValue);\n          hasNewValue = true;\n\n          _this.fireSelect(label);\n        }\n      });\n      return hasNewValue ? nextValue : undefined;\n    };\n\n    _this.getRealOpenState = function (state) {\n      // tslint:disable-next-line:variable-name\n      var _open = _this.props.open;\n\n      if (typeof _open === 'boolean') {\n        return _open;\n      }\n\n      var open = (state || _this.state).open;\n      var options = _this._options || [];\n\n      if (isMultipleOrTagsOrCombobox(_this.props) || !_this.props.showSearch) {\n        if (open && !options.length) {\n          open = false;\n        }\n      }\n\n      return open;\n    };\n\n    _this.markMouseDown = function () {\n      _this._mouseDown = true;\n    };\n\n    _this.markMouseLeave = function () {\n      _this._mouseDown = false;\n    };\n\n    _this.handleBackfill = function (item) {\n      if (!_this.props.backfill || !(isSingleMode(_this.props) || isCombobox(_this.props))) {\n        return;\n      }\n\n      var key = getValuePropValue(item);\n\n      if (isCombobox(_this.props)) {\n        _this.setInputValue(key, false);\n      }\n\n      _this.setState({\n        value: [key],\n        backfillValue: key\n      });\n    };\n\n    _this.filterOption = function (input, child) {\n      var defaultFilter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultFilterFn;\n      var value = _this.state.value;\n      var lastValue = value[value.length - 1];\n\n      if (!input || lastValue && lastValue === _this.state.backfillValue) {\n        return true;\n      }\n\n      var filterFn = _this.props.filterOption;\n\n      if ('filterOption' in _this.props) {\n        if (filterFn === true) {\n          filterFn = defaultFilter.bind(_assertThisInitialized(_this));\n        }\n      } else {\n        filterFn = defaultFilter.bind(_assertThisInitialized(_this));\n      }\n\n      if (!filterFn) {\n        return true;\n      } else if (typeof filterFn === 'function') {\n        return filterFn.call(_assertThisInitialized(_this), input, child);\n      } else if (child.props.disabled) {\n        return false;\n      }\n\n      return true;\n    };\n\n    _this.timeoutFocus = function () {\n      if (_this.focusTimer) {\n        _this.clearFocusTime();\n      }\n\n      _this.focusTimer = window.setTimeout(function () {\n        if (_this.props.onFocus) {\n          _this.props.onFocus();\n        }\n      }, 10);\n    };\n\n    _this.clearFocusTime = function () {\n      if (_this.focusTimer) {\n        clearTimeout(_this.focusTimer);\n        _this.focusTimer = null;\n      }\n    };\n\n    _this.clearBlurTime = function () {\n      if (_this.blurTimer) {\n        clearTimeout(_this.blurTimer);\n        _this.blurTimer = null;\n      }\n    };\n\n    _this.updateFocusClassName = function () {\n      var rootRef = _this.rootRef;\n      var props = _this.props; // avoid setState and its side effect\n\n      if (_this._focused) {\n        classes(rootRef).add(\"\".concat(props.prefixCls, \"-focused\"));\n      } else {\n        classes(rootRef).remove(\"\".concat(props.prefixCls, \"-focused\"));\n      }\n    };\n\n    _this.maybeFocus = function (open, needFocus) {\n      if (needFocus || open) {\n        var input = _this.getInputDOMNode();\n\n        var _document = document,\n            activeElement = _document.activeElement;\n\n        if (input && (open || isMultipleOrTagsOrCombobox(_this.props))) {\n          if (activeElement !== input) {\n            input.focus();\n            _this._focused = true;\n          }\n        } else if (activeElement !== _this.selectionRef && _this.selectionRef) {\n          _this.selectionRef.focus();\n\n          _this._focused = true;\n        }\n      }\n    };\n\n    _this.removeSelected = function (selectedKey, e) {\n      var props = _this.props;\n\n      if (props.disabled || _this.isChildDisabled(selectedKey)) {\n        return;\n      } // Do not trigger Trigger popup\n\n\n      if (e && e.stopPropagation) {\n        e.stopPropagation();\n      }\n\n      var oldValue = _this.state.value;\n      var value = oldValue.filter(function (singleValue) {\n        return singleValue !== selectedKey;\n      });\n      var canMultiple = isMultipleOrTags(props);\n\n      if (canMultiple) {\n        var event = selectedKey;\n\n        if (props.labelInValue) {\n          event = {\n            key: selectedKey,\n            label: _this.getLabelBySingleValue(selectedKey)\n          };\n        }\n\n        if (props.onDeselect) {\n          props.onDeselect(event, _this.getOptionBySingleValue(selectedKey));\n        }\n      }\n\n      _this.fireChange(value);\n    };\n\n    _this.openIfHasChildren = function () {\n      var props = _this.props;\n\n      if (React.Children.count(props.children) || isSingleMode(props)) {\n        _this.setOpenState(true);\n      }\n    };\n\n    _this.fireSelect = function (value) {\n      if (_this.props.onSelect) {\n        _this.props.onSelect(_this.getVLBySingleValue(value), _this.getOptionBySingleValue(value));\n      }\n    };\n\n    _this.fireChange = function (value) {\n      var props = _this.props;\n\n      if (!('value' in props)) {\n        _this.setState({\n          value: value\n        }, _this.forcePopupAlign);\n      }\n\n      var vls = _this.getVLForOnChange(value);\n\n      var options = _this.getOptionsBySingleValue(value);\n\n      if (props.onChange) {\n        props.onChange(vls, isMultipleOrTags(_this.props) ? options : options[0]);\n      }\n    };\n\n    _this.isChildDisabled = function (key) {\n      return childrenToArray(_this.props.children).some(function (child) {\n        var childValue = getValuePropValue(child);\n        return childValue === key && child.props && child.props.disabled;\n      });\n    };\n\n    _this.forcePopupAlign = function () {\n      if (!_this.state.open) {\n        return;\n      }\n\n      if (_this.selectTriggerRef && _this.selectTriggerRef.triggerRef) {\n        _this.selectTriggerRef.triggerRef.forcePopupAlign();\n      }\n    };\n\n    _this.renderFilterOptions = function () {\n      var inputValue = _this.state.inputValue;\n      var _this$props3 = _this.props,\n          children = _this$props3.children,\n          tags = _this$props3.tags,\n          filterOption = _this$props3.filterOption,\n          notFoundContent = _this$props3.notFoundContent;\n      var menuItems = [];\n      var childrenKeys = [];\n      var empty = false;\n\n      var options = _this.renderFilterOptionsFromChildren(children, childrenKeys, menuItems);\n\n      if (tags) {\n        // tags value must be string\n        var value = _this.state.value;\n        value = value.filter(function (singleValue) {\n          return childrenKeys.indexOf(singleValue) === -1 && (!inputValue || String(singleValue).indexOf(String(inputValue)) > -1);\n        }); // sort by length\n\n        value.sort(function (val1, val2) {\n          return val1.length - val2.length;\n        });\n        value.forEach(function (singleValue) {\n          var key = singleValue;\n          var menuItem = React.createElement(MenuItem, {\n            style: UNSELECTABLE_STYLE,\n            role: \"option\",\n            attribute: UNSELECTABLE_ATTRIBUTE,\n            value: key,\n            key: key\n          }, key);\n          options.push(menuItem);\n          menuItems.push(menuItem);\n        });\n\n        if (inputValue) {\n          var notFindInputItem = menuItems.every(function (option) {\n            // this.filterOption return true has two meaning,\n            // 1, some one exists after filtering\n            // 2, filterOption is set to false\n            // condition 2 does not mean the option has same value with inputValue\n            var filterFn = function filterFn() {\n              return getValuePropValue(option) === inputValue;\n            };\n\n            if (filterOption !== false) {\n              return !_this.filterOption.call(_assertThisInitialized(_this), inputValue, option, filterFn);\n            }\n\n            return !filterFn();\n          });\n\n          if (notFindInputItem) {\n            options.unshift(React.createElement(MenuItem, {\n              style: UNSELECTABLE_STYLE,\n              role: \"option\",\n              attribute: UNSELECTABLE_ATTRIBUTE,\n              value: inputValue,\n              key: inputValue\n            }, inputValue));\n          }\n        }\n      }\n\n      if (!options.length && notFoundContent) {\n        empty = true;\n        options = [React.createElement(MenuItem, {\n          style: UNSELECTABLE_STYLE,\n          attribute: UNSELECTABLE_ATTRIBUTE,\n          disabled: true,\n          role: \"option\",\n          value: \"NOT_FOUND\",\n          key: \"NOT_FOUND\"\n        }, notFoundContent)];\n      }\n\n      return {\n        empty: empty,\n        options: options\n      };\n    };\n\n    _this.renderFilterOptionsFromChildren = function (children, childrenKeys, menuItems) {\n      var sel = [];\n      var props = _this.props;\n      var inputValue = _this.state.inputValue;\n      var tags = props.tags;\n      React.Children.forEach(children, function (child) {\n        if (!child) {\n          return;\n        }\n\n        var type = child.type;\n\n        if (type.isSelectOptGroup) {\n          var label = child.props.label;\n          var key = child.key;\n\n          if (!key && typeof label === 'string') {\n            key = label;\n          } else if (!label && key) {\n            label = key;\n          } // Match option group label\n\n\n          if (inputValue && _this.filterOption(inputValue, child)) {\n            var innerItems = childrenToArray(child.props.children).map(function (subChild) {\n              var childValueSub = getValuePropValue(subChild) || subChild.key;\n              return React.createElement(MenuItem, _extends({\n                key: childValueSub,\n                value: childValueSub\n              }, subChild.props));\n            });\n            sel.push(React.createElement(MenuItemGroup, {\n              key: key,\n              title: label\n            }, innerItems)); // Not match\n          } else {\n            var _innerItems = _this.renderFilterOptionsFromChildren(child.props.children, childrenKeys, menuItems);\n\n            if (_innerItems.length) {\n              sel.push(React.createElement(MenuItemGroup, {\n                key: key,\n                title: label\n              }, _innerItems));\n            }\n          }\n\n          return;\n        }\n\n        warning(type.isSelectOption, 'the children of `Select` should be `Select.Option` or `Select.OptGroup`, ' + \"instead of `\".concat(type.name || type.displayName || child.type, \"`.\"));\n        var childValue = getValuePropValue(child);\n        validateOptionValue(childValue, _this.props);\n\n        if (_this.filterOption(inputValue, child)) {\n          var menuItem = React.createElement(MenuItem, _extends({\n            style: UNSELECTABLE_STYLE,\n            attribute: UNSELECTABLE_ATTRIBUTE,\n            value: childValue,\n            key: childValue,\n            role: \"option\"\n          }, child.props));\n          sel.push(menuItem);\n          menuItems.push(menuItem);\n        }\n\n        if (tags) {\n          childrenKeys.push(childValue);\n        }\n      });\n      return sel;\n    };\n\n    _this.renderTopControlNode = function () {\n      var _this$state = _this.state,\n          open = _this$state.open,\n          inputValue = _this$state.inputValue;\n      var value = _this.state.value;\n      var props = _this.props;\n      var choiceTransitionName = props.choiceTransitionName,\n          prefixCls = props.prefixCls,\n          maxTagTextLength = props.maxTagTextLength,\n          maxTagCount = props.maxTagCount,\n          showSearch = props.showSearch,\n          removeIcon = props.removeIcon;\n      var maxTagPlaceholder = props.maxTagPlaceholder;\n      var className = \"\".concat(prefixCls, \"-selection__rendered\"); // search input is inside topControlNode in single, multiple & combobox. 2016/04/13\n\n      var innerNode = null;\n\n      if (isSingleMode(props)) {\n        var selectedValue = null;\n\n        if (value.length) {\n          var showSelectedValue = false;\n          var opacity = 1;\n\n          if (!showSearch) {\n            showSelectedValue = true;\n          } else if (open) {\n            showSelectedValue = !inputValue;\n\n            if (showSelectedValue) {\n              opacity = 0.4;\n            }\n          } else {\n            showSelectedValue = true;\n          }\n\n          var singleValue = value[0];\n\n          var _this$getOptionInfoBy3 = _this.getOptionInfoBySingleValue(singleValue),\n              label = _this$getOptionInfoBy3.label,\n              title = _this$getOptionInfoBy3.title;\n\n          selectedValue = React.createElement(\"div\", {\n            key: \"value\",\n            className: \"\".concat(prefixCls, \"-selection-selected-value\"),\n            title: toTitle(title || label),\n            style: {\n              display: showSelectedValue ? 'block' : 'none',\n              opacity: opacity\n            }\n          }, label);\n        }\n\n        if (!showSearch) {\n          innerNode = [selectedValue];\n        } else {\n          innerNode = [selectedValue, React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-search \").concat(prefixCls, \"-search--inline\"),\n            key: \"input\",\n            style: {\n              display: open ? 'block' : 'none'\n            }\n          }, _this.getInputElement())];\n        }\n      } else {\n        var selectedValueNodes = [];\n        var limitedCountValue = value;\n        var maxTagPlaceholderEl;\n\n        if (maxTagCount !== undefined && value.length > maxTagCount) {\n          limitedCountValue = limitedCountValue.slice(0, maxTagCount);\n\n          var omittedValues = _this.getVLForOnChange(value.slice(maxTagCount, value.length));\n\n          var content = \"+ \".concat(value.length - maxTagCount, \" ...\");\n\n          if (maxTagPlaceholder) {\n            content = typeof maxTagPlaceholder === 'function' ? maxTagPlaceholder(omittedValues) : maxTagPlaceholder;\n          }\n\n          maxTagPlaceholderEl = React.createElement(\"li\", _extends({\n            style: UNSELECTABLE_STYLE\n          }, UNSELECTABLE_ATTRIBUTE, {\n            role: \"presentation\",\n            onMouseDown: preventDefaultEvent,\n            className: \"\".concat(prefixCls, \"-selection__choice \").concat(prefixCls, \"-selection__choice__disabled\"),\n            key: \"maxTagPlaceholder\",\n            title: toTitle(content)\n          }), React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-selection__choice__content\")\n          }, content));\n        }\n\n        if (isMultipleOrTags(props)) {\n          selectedValueNodes = limitedCountValue.map(function (singleValue) {\n            var info = _this.getOptionInfoBySingleValue(singleValue);\n\n            var content = info.label;\n            var title = info.title || content;\n\n            if (maxTagTextLength && typeof content === 'string' && content.length > maxTagTextLength) {\n              content = \"\".concat(content.slice(0, maxTagTextLength), \"...\");\n            }\n\n            var disabled = _this.isChildDisabled(singleValue);\n\n            var choiceClassName = disabled ? \"\".concat(prefixCls, \"-selection__choice \").concat(prefixCls, \"-selection__choice__disabled\") : \"\".concat(prefixCls, \"-selection__choice\");\n            return React.createElement(\"li\", _extends({\n              style: UNSELECTABLE_STYLE\n            }, UNSELECTABLE_ATTRIBUTE, {\n              onMouseDown: preventDefaultEvent,\n              className: choiceClassName,\n              role: \"presentation\",\n              key: singleValue || SELECT_EMPTY_VALUE_KEY,\n              title: toTitle(title)\n            }), React.createElement(\"div\", {\n              className: \"\".concat(prefixCls, \"-selection__choice__content\")\n            }, content), disabled ? null : React.createElement(\"span\", {\n              onClick: function onClick(event) {\n                _this.removeSelected(singleValue, event);\n              },\n              className: \"\".concat(prefixCls, \"-selection__choice__remove\")\n            }, removeIcon || React.createElement(\"i\", {\n              className: \"\".concat(prefixCls, \"-selection__choice__remove-icon\")\n            }, \"\\xD7\")));\n          });\n        }\n\n        if (maxTagPlaceholderEl) {\n          selectedValueNodes.push(maxTagPlaceholderEl);\n        }\n\n        selectedValueNodes.push(React.createElement(\"li\", {\n          className: \"\".concat(prefixCls, \"-search \").concat(prefixCls, \"-search--inline\"),\n          key: \"__input\"\n        }, _this.getInputElement()));\n\n        if (isMultipleOrTags(props) && choiceTransitionName) {\n          innerNode = React.createElement(Animate, {\n            onLeave: _this.onChoiceAnimationLeave,\n            component: \"ul\",\n            transitionName: choiceTransitionName\n          }, selectedValueNodes);\n        } else {\n          innerNode = React.createElement(\"ul\", null, selectedValueNodes);\n        }\n      }\n\n      return React.createElement(\"div\", {\n        className: className,\n        ref: _this.saveTopCtrlRef\n      }, _this.getPlaceholderElement(), innerNode);\n    };\n\n    var optionsInfo = Select.getOptionsInfoFromProps(props);\n    _this.state = {\n      value: Select.getValueFromProps(props, true),\n      inputValue: props.combobox ? Select.getInputValueForCombobox(props, optionsInfo, true) : '',\n      open: props.defaultOpen,\n      optionsInfo: optionsInfo,\n      backfillValue: '',\n      // a flag for aviod redundant getOptionsInfoFromProps call\n      skipBuildOptionsInfo: true,\n      ariaId: ''\n    };\n    _this.saveInputRef = saveRef(_assertThisInitialized(_this), 'inputRef');\n    _this.saveInputMirrorRef = saveRef(_assertThisInitialized(_this), 'inputMirrorRef');\n    _this.saveTopCtrlRef = saveRef(_assertThisInitialized(_this), 'topCtrlRef');\n    _this.saveSelectTriggerRef = saveRef(_assertThisInitialized(_this), 'selectTriggerRef');\n    _this.saveRootRef = saveRef(_assertThisInitialized(_this), 'rootRef');\n    _this.saveSelectionRef = saveRef(_assertThisInitialized(_this), 'selectionRef');\n    return _this;\n  }\n\n  _createClass(Select, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // when defaultOpen is true, we should auto focus search input\n      // https://github.com/ant-design/ant-design/issues/14254\n      if (this.props.autoFocus || this.state.open) {\n        this.focus();\n      }\n\n      this.setState({\n        ariaId: generateUUID()\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (isMultipleOrTags(this.props)) {\n        var inputNode = this.getInputDOMNode();\n        var mirrorNode = this.getInputMirrorDOMNode();\n\n        if (inputNode && inputNode.value && mirrorNode) {\n          inputNode.style.width = '';\n          inputNode.style.width = \"\".concat(mirrorNode.clientWidth, \"px\");\n        } else if (inputNode) {\n          inputNode.style.width = '';\n        }\n      }\n\n      this.forcePopupAlign();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.clearFocusTime();\n      this.clearBlurTime();\n\n      if (this.dropdownContainer) {\n        ReactDOM.unmountComponentAtNode(this.dropdownContainer);\n        document.body.removeChild(this.dropdownContainer);\n        this.dropdownContainer = null;\n      }\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      if (isSingleMode(this.props) && this.selectionRef) {\n        this.selectionRef.focus();\n      } else if (this.getInputDOMNode()) {\n        this.getInputDOMNode().focus();\n      }\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      if (isSingleMode(this.props) && this.selectionRef) {\n        this.selectionRef.blur();\n      } else if (this.getInputDOMNode()) {\n        this.getInputDOMNode().blur();\n      }\n    }\n  }, {\n    key: \"renderArrow\",\n    value: function renderArrow(multiple) {\n      var _this$props4 = this.props,\n          showArrow = _this$props4.showArrow,\n          loading = _this$props4.loading,\n          inputIcon = _this$props4.inputIcon,\n          prefixCls = _this$props4.prefixCls;\n\n      if (!showArrow) {\n        return null;\n      } // if loading  have loading icon\n\n\n      if (multiple && !loading) {\n        return null;\n      }\n\n      var defaultIcon = loading ? React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-arrow-loading\")\n      }) : React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-arrow-icon\")\n      });\n      return React.createElement(\"span\", _extends({\n        key: \"arrow\",\n        className: \"\".concat(prefixCls, \"-arrow\"),\n        style: UNSELECTABLE_STYLE\n      }, UNSELECTABLE_ATTRIBUTE, {\n        onClick: this.onArrowClick\n      }), inputIcon || defaultIcon);\n    }\n  }, {\n    key: \"renderClear\",\n    value: function renderClear() {\n      var _this$props5 = this.props,\n          prefixCls = _this$props5.prefixCls,\n          allowClear = _this$props5.allowClear,\n          clearIcon = _this$props5.clearIcon;\n      var inputValue = this.state.inputValue;\n      var value = this.state.value;\n      var clear = React.createElement(\"span\", _extends({\n        key: \"clear\",\n        className: \"\".concat(prefixCls, \"-selection__clear\"),\n        onMouseDown: preventDefaultEvent,\n        style: UNSELECTABLE_STYLE\n      }, UNSELECTABLE_ATTRIBUTE, {\n        onClick: this.onClearSelection\n      }), clearIcon || React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-selection__clear-icon\")\n      }, \"\\xD7\"));\n\n      if (!allowClear) {\n        return null;\n      }\n\n      if (isCombobox(this.props)) {\n        if (inputValue) {\n          return clear;\n        }\n\n        return null;\n      }\n\n      if (inputValue || value.length) {\n        return clear;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _rootCls;\n\n      var props = this.props;\n      var multiple = isMultipleOrTags(props);\n      var state = this.state;\n      var className = props.className,\n          disabled = props.disabled,\n          prefixCls = props.prefixCls;\n      var ctrlNode = this.renderTopControlNode();\n      var _this$state2 = this.state,\n          open = _this$state2.open,\n          ariaId = _this$state2.ariaId;\n\n      if (open) {\n        var filterOptions = this.renderFilterOptions();\n        this._empty = filterOptions.empty;\n        this._options = filterOptions.options;\n      }\n\n      var realOpen = this.getRealOpenState();\n      var empty = this._empty;\n      var options = this._options || [];\n      var dataOrAriaAttributeProps = {};\n      Object.keys(props).forEach(function (key) {\n        if (Object.prototype.hasOwnProperty.call(props, key) && (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role')) {\n          dataOrAriaAttributeProps[key] = props[key];\n        }\n      }); // for (const key in props) {\n      //   if (\n      //     Object.prototype.hasOwnProperty.call(props, key) &&\n      //     (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role')\n      //   ) {\n      //     dataOrAriaAttributeProps[key] = props[key];\n      //   }\n      // }\n\n      var extraSelectionProps = _extends({}, dataOrAriaAttributeProps);\n\n      if (!isMultipleOrTagsOrCombobox(props)) {\n        extraSelectionProps = _extends({}, extraSelectionProps, {\n          onKeyDown: this.onKeyDown,\n          tabIndex: props.disabled ? -1 : props.tabIndex\n        });\n      }\n\n      var rootCls = (_rootCls = {}, _defineProperty(_rootCls, className, !!className), _defineProperty(_rootCls, prefixCls, 1), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-open\"), open), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-focused\"), open || !!this._focused), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-combobox\"), isCombobox(props)), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-enabled\"), !disabled), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-allow-clear\"), !!props.allowClear), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-no-arrow\"), !props.showArrow), _rootCls);\n      return React.createElement(SelectTrigger, {\n        onPopupFocus: this.onPopupFocus,\n        onMouseEnter: this.props.onMouseEnter,\n        onMouseLeave: this.props.onMouseLeave,\n        dropdownAlign: props.dropdownAlign,\n        dropdownClassName: props.dropdownClassName,\n        dropdownMatchSelectWidth: props.dropdownMatchSelectWidth,\n        defaultActiveFirstOption: props.defaultActiveFirstOption,\n        dropdownMenuStyle: props.dropdownMenuStyle,\n        transitionName: props.transitionName,\n        animation: props.animation,\n        prefixCls: props.prefixCls,\n        dropdownStyle: props.dropdownStyle,\n        combobox: props.combobox,\n        showSearch: props.showSearch,\n        options: options,\n        empty: empty,\n        multiple: multiple,\n        disabled: disabled,\n        visible: realOpen,\n        inputValue: state.inputValue,\n        value: state.value,\n        backfillValue: state.backfillValue,\n        firstActiveValue: props.firstActiveValue,\n        onDropdownVisibleChange: this.onDropdownVisibleChange,\n        getPopupContainer: props.getPopupContainer,\n        onMenuSelect: this.onMenuSelect,\n        onMenuDeselect: this.onMenuDeselect,\n        onPopupScroll: props.onPopupScroll,\n        showAction: props.showAction,\n        ref: this.saveSelectTriggerRef,\n        menuItemSelectedIcon: props.menuItemSelectedIcon,\n        dropdownRender: props.dropdownRender,\n        ariaId: ariaId\n      }, React.createElement(\"div\", {\n        id: props.id,\n        style: props.style,\n        ref: this.saveRootRef,\n        onBlur: this.onOuterBlur,\n        onFocus: this.onOuterFocus,\n        className: classnames(rootCls),\n        onMouseDown: this.markMouseDown,\n        onMouseUp: this.markMouseLeave,\n        onMouseOut: this.markMouseLeave\n      }, React.createElement(\"div\", _extends({\n        ref: this.saveSelectionRef,\n        key: \"selection\",\n        className: \"\".concat(prefixCls, \"-selection\\n            \").concat(prefixCls, \"-selection--\").concat(multiple ? 'multiple' : 'single'),\n        role: \"combobox\",\n        \"aria-autocomplete\": \"list\",\n        \"aria-haspopup\": \"true\",\n        \"aria-controls\": ariaId,\n        \"aria-expanded\": realOpen\n      }, extraSelectionProps), ctrlNode, this.renderClear(), this.renderArrow(!!multiple))));\n    }\n  }]);\n\n  return Select;\n}(React.Component);\n\nSelect.propTypes = SelectPropTypes;\nSelect.defaultProps = {\n  prefixCls: 'rc-select',\n  defaultOpen: false,\n  labelInValue: false,\n  defaultActiveFirstOption: true,\n  showSearch: true,\n  allowClear: false,\n  placeholder: '',\n  onChange: noop,\n  onFocus: noop,\n  onBlur: noop,\n  onSelect: noop,\n  onSearch: noop,\n  onDeselect: noop,\n  onInputKeyDown: noop,\n  showArrow: true,\n  dropdownMatchSelectWidth: true,\n  dropdownStyle: {},\n  dropdownMenuStyle: {},\n  optionFilterProp: 'value',\n  optionLabelProp: 'value',\n  notFoundContent: 'Not Found',\n  backfill: false,\n  showAction: ['click'],\n  tokenSeparators: [],\n  autoClearSearchValue: true,\n  tabIndex: 0,\n  dropdownRender: function dropdownRender(menu) {\n    return menu;\n  }\n};\n\nSelect.getDerivedStateFromProps = function (nextProps, prevState) {\n  var optionsInfo = prevState.skipBuildOptionsInfo ? prevState.optionsInfo : Select.getOptionsInfoFromProps(nextProps, prevState);\n  var newState = {\n    optionsInfo: optionsInfo,\n    skipBuildOptionsInfo: false\n  };\n\n  if ('open' in nextProps) {\n    newState.open = nextProps.open;\n  }\n\n  if ('value' in nextProps) {\n    var value = Select.getValueFromProps(nextProps);\n    newState.value = value;\n\n    if (nextProps.combobox) {\n      newState.inputValue = Select.getInputValueForCombobox(nextProps, optionsInfo);\n    }\n  }\n\n  return newState;\n};\n\nSelect.getOptionsFromChildren = function (children) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  React.Children.forEach(children, function (child) {\n    if (!child) {\n      return;\n    }\n\n    var type = child.type;\n\n    if (type.isSelectOptGroup) {\n      Select.getOptionsFromChildren(child.props.children, options);\n    } else {\n      options.push(child);\n    }\n  });\n  return options;\n};\n\nSelect.getInputValueForCombobox = function (props, optionsInfo, useDefaultValue) {\n  var value = [];\n\n  if ('value' in props && !useDefaultValue) {\n    value = toArray(props.value);\n  }\n\n  if ('defaultValue' in props && useDefaultValue) {\n    value = toArray(props.defaultValue);\n  }\n\n  if (value.length) {\n    value = value[0];\n  } else {\n    return '';\n  }\n\n  var label = value;\n\n  if (props.labelInValue) {\n    label = value.label;\n  } else if (optionsInfo[getMapKey(value)]) {\n    label = optionsInfo[getMapKey(value)].label;\n  }\n\n  if (label === undefined) {\n    label = '';\n  }\n\n  return label;\n};\n\nSelect.getLabelFromOption = function (props, option) {\n  return getPropValue(option, props.optionLabelProp);\n};\n\nSelect.getOptionsInfoFromProps = function (props, preState) {\n  var options = Select.getOptionsFromChildren(props.children);\n  var optionsInfo = {};\n  options.forEach(function (option) {\n    var singleValue = getValuePropValue(option);\n    optionsInfo[getMapKey(singleValue)] = {\n      option: option,\n      value: singleValue,\n      label: Select.getLabelFromOption(props, option),\n      title: option.props.title,\n      disabled: option.props.disabled\n    };\n  });\n\n  if (preState) {\n    // keep option info in pre state value.\n    var oldOptionsInfo = preState.optionsInfo;\n    var value = preState.value;\n\n    if (value) {\n      value.forEach(function (v) {\n        var key = getMapKey(v);\n\n        if (!optionsInfo[key] && oldOptionsInfo[key] !== undefined) {\n          optionsInfo[key] = oldOptionsInfo[key];\n        }\n      });\n    }\n  }\n\n  return optionsInfo;\n};\n\nSelect.getValueFromProps = function (props, useDefaultValue) {\n  var value = [];\n\n  if ('value' in props && !useDefaultValue) {\n    value = toArray(props.value);\n  }\n\n  if ('defaultValue' in props && useDefaultValue) {\n    value = toArray(props.defaultValue);\n  }\n\n  if (props.labelInValue) {\n    value = value.map(function (v) {\n      return v.key;\n    });\n  }\n\n  return value;\n};\n\nSelect.displayName = 'Select';\npolyfill(Select);\nexport default Select;","map":{"version":3,"sources":["E:/web/bookstore/node_modules/rc-select/es/Select.js"],"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_extends","assign","target","i","arguments","length","source","prototype","hasOwnProperty","call","apply","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_inherits","subClass","superClass","create","constructor","_setPrototypeOf","p","classnames","classes","Animate","Item","MenuItem","ItemGroup","MenuItemGroup","childrenToArray","KeyCode","React","ReactDOM","polyfill","warning","Option","SelectPropTypes","SelectTrigger","defaultFilterFn","findFirstMenuItem","findIndexInValueBySingleValue","generateUUID","getLabelFromPropsValue","getMapKey","getPropValue","getValuePropValue","includesSeparators","isCombobox","isMultipleOrTags","isMultipleOrTagsOrCombobox","isSingleMode","preventDefaultEvent","saveRef","splitBySeparators","toArray","toTitle","UNSELECTABLE_ATTRIBUTE","UNSELECTABLE_STYLE","validateOptionValue","SELECT_EMPTY_VALUE_KEY","noop","chaining","_len","fns","Array","_key","_len2","args","_key2","Select","_React$Component","_this","inputRef","inputMirrorRef","topCtrlRef","selectTriggerRef","rootRef","selectionRef","dropdownContainer","blurTimer","focusTimer","_focused","_mouseDown","_options","_empty","onInputChange","event","tokenSeparators","val","nextValue","getValueByInput","undefined","fireChange","setOpenState","setInputValue","setState","open","onDropdownVisibleChange","clearBlurTime","timeoutFocus","updateFocusClassName","onKeyDown","state","disabled","keyCode","getInputDOMNode","onInputKeyDown","ENTER","DOWN","preventDefault","SPACE","_this$props","combobox","isRealOpen","getRealOpenState","BACKSPACE","removeSelected","openIfHasChildren","stopPropagation","ESC","menu","getInnerMenu","handleBackfill","onMenuSelect","_ref","item","selectedValue","lastValue","fireSelect","concat","backfillValue","inputValue","optionLabelProp","autoClearSearchValue","onMenuDeselect","_ref2","domEvent","type","onArrowClick","e","onPlaceholderClick","focus","onOuterFocus","onPopupFocus","maybeFocus","onOuterBlur","window","setTimeout","showSearch","defaultActiveFirstOption","options","firstOption","tmpValue","onBlur","getVLForOnChange","onClearSelection","onChoiceAnimationLeave","forcePopupAlign","getOptionInfoBySingleValue","optionsInfo","info","defaultLabel","labelInValue","label","defaultInfo","option","createElement","getOptionBySingleValue","_this$getOptionInfoBy","getOptionsBySingleValue","values","map","getValueByLabel","keys","forEach","oldLable","join","getVLBySingleValue","getLabelBySingleValue","vlsS","vls","v","vl","_this$getOptionInfoBy2","getDropdownContainer","document","body","appendChild","getPlaceholderElement","hidden","placeholder","onMouseDown","style","display","onClick","className","prefixCls","getInputElement","defaultInput","id","autoComplete","inputElement","inputCls","cloneElement","ref","saveInputRef","onChange","saveInputMirrorRef","querySelector","getInputMirrorDOMNode","getPopupDOMNode","getPopupMenuComponent","needFocus","nextState","fireSearch","onSearch","str","_this$props2","multiple","hasNewValue","_open","markMouseDown","markMouseLeave","backfill","filterOption","input","child","defaultFilter","filterFn","bind","clearFocusTime","onFocus","clearTimeout","add","remove","_document","activeElement","selectedKey","isChildDisabled","oldValue","filter","singleValue","canMultiple","onDeselect","Children","count","children","onSelect","some","childValue","triggerRef","renderFilterOptions","_this$props3","tags","notFoundContent","menuItems","childrenKeys","empty","renderFilterOptionsFromChildren","indexOf","String","sort","val1","val2","menuItem","role","attribute","push","notFindInputItem","every","unshift","sel","isSelectOptGroup","innerItems","subChild","childValueSub","title","_innerItems","isSelectOption","name","displayName","renderTopControlNode","_this$state","choiceTransitionName","maxTagTextLength","maxTagCount","removeIcon","maxTagPlaceholder","innerNode","showSelectedValue","opacity","_this$getOptionInfoBy3","selectedValueNodes","limitedCountValue","maxTagPlaceholderEl","slice","omittedValues","content","choiceClassName","onLeave","component","transitionName","saveTopCtrlRef","getOptionsInfoFromProps","getValueFromProps","getInputValueForCombobox","defaultOpen","skipBuildOptionsInfo","ariaId","saveSelectTriggerRef","saveRootRef","saveSelectionRef","componentDidMount","autoFocus","componentDidUpdate","inputNode","mirrorNode","width","clientWidth","componentWillUnmount","unmountComponentAtNode","removeChild","blur","renderArrow","_this$props4","showArrow","loading","inputIcon","defaultIcon","renderClear","_this$props5","allowClear","clearIcon","clear","render","_rootCls","ctrlNode","_this$state2","filterOptions","realOpen","dataOrAriaAttributeProps","substr","extraSelectionProps","tabIndex","rootCls","onMouseEnter","onMouseLeave","dropdownAlign","dropdownClassName","dropdownMatchSelectWidth","dropdownMenuStyle","animation","dropdownStyle","visible","firstActiveValue","getPopupContainer","onPopupScroll","showAction","menuItemSelectedIcon","dropdownRender","onMouseUp","onMouseOut","Component","propTypes","defaultProps","optionFilterProp","getDerivedStateFromProps","nextProps","prevState","newState","getOptionsFromChildren","useDefaultValue","defaultValue","getLabelFromOption","preState","oldOptionsInfo"],"mappings":"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","sourcesContent":["function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport classnames from 'classnames';\nimport classes from 'component-classes';\nimport Animate from 'rc-animate';\nimport { Item as MenuItem, ItemGroup as MenuItemGroup } from 'rc-menu';\nimport childrenToArray from \"rc-util/es/Children/toArray\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { polyfill } from 'react-lifecycles-compat';\nimport warning from 'warning';\nimport Option from './Option';\nimport SelectPropTypes from './PropTypes';\nimport SelectTrigger from './SelectTrigger';\nimport { defaultFilterFn, findFirstMenuItem, findIndexInValueBySingleValue, generateUUID, getLabelFromPropsValue, getMapKey, getPropValue, getValuePropValue, includesSeparators, isCombobox, isMultipleOrTags, isMultipleOrTagsOrCombobox, isSingleMode, preventDefaultEvent, saveRef, splitBySeparators, toArray, toTitle, UNSELECTABLE_ATTRIBUTE, UNSELECTABLE_STYLE, validateOptionValue } from './util';\nvar SELECT_EMPTY_VALUE_KEY = 'RC_SELECT_EMPTY_VALUE_KEY';\n\nvar noop = function noop() {\n  return null;\n};\n\nfunction chaining() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    // tslint:disable-next-line:prefer-for-of\n    for (var i = 0; i < fns.length; i++) {\n      if (fns[i] && typeof fns[i] === 'function') {\n        fns[i].apply(chaining, args);\n      }\n    }\n  };\n}\n\nvar Select =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Select, _React$Component);\n\n  function Select(props) {\n    var _this;\n\n    _classCallCheck(this, Select);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Select).call(this, props));\n    _this.inputRef = null;\n    _this.inputMirrorRef = null;\n    _this.topCtrlRef = null;\n    _this.selectTriggerRef = null;\n    _this.rootRef = null;\n    _this.selectionRef = null;\n    _this.dropdownContainer = null;\n    _this.blurTimer = null;\n    _this.focusTimer = null; // tslint:disable-next-line:variable-name\n\n    _this._focused = false; // tslint:disable-next-line:variable-name\n\n    _this._mouseDown = false; // tslint:disable-next-line:variable-name\n\n    _this._options = []; // tslint:disable-next-line:variable-name\n\n    _this._empty = false;\n\n    _this.onInputChange = function (event) {\n      var tokenSeparators = _this.props.tokenSeparators;\n      var val = event.target.value;\n\n      if (isMultipleOrTags(_this.props) && tokenSeparators.length && includesSeparators(val, tokenSeparators)) {\n        var nextValue = _this.getValueByInput(val);\n\n        if (nextValue !== undefined) {\n          _this.fireChange(nextValue);\n        }\n\n        _this.setOpenState(false, true);\n\n        _this.setInputValue('', false);\n\n        return;\n      }\n\n      _this.setInputValue(val);\n\n      _this.setState({\n        open: true\n      });\n\n      if (isCombobox(_this.props)) {\n        _this.fireChange([val]);\n      }\n    };\n\n    _this.onDropdownVisibleChange = function (open) {\n      if (open && !_this._focused) {\n        _this.clearBlurTime();\n\n        _this.timeoutFocus();\n\n        _this._focused = true;\n\n        _this.updateFocusClassName();\n      }\n\n      _this.setOpenState(open);\n    }; // combobox ignore\n\n\n    _this.onKeyDown = function (event) {\n      var open = _this.state.open;\n      var disabled = _this.props.disabled;\n\n      if (disabled) {\n        return;\n      }\n\n      var keyCode = event.keyCode;\n\n      if (open && !_this.getInputDOMNode()) {\n        _this.onInputKeyDown(event);\n      } else if (keyCode === KeyCode.ENTER || keyCode === KeyCode.DOWN) {\n        if (!open) {\n          _this.setOpenState(true);\n        }\n\n        event.preventDefault();\n      } else if (keyCode === KeyCode.SPACE) {\n        // Not block space if popup is shown\n        if (!open) {\n          _this.setOpenState(true);\n\n          event.preventDefault();\n        }\n      }\n    };\n\n    _this.onInputKeyDown = function (event) {\n      var _this$props = _this.props,\n          disabled = _this$props.disabled,\n          combobox = _this$props.combobox;\n\n      if (disabled) {\n        return;\n      }\n\n      var state = _this.state;\n\n      var isRealOpen = _this.getRealOpenState(state); // magic code\n\n\n      var keyCode = event.keyCode;\n\n      if (isMultipleOrTags(_this.props) && !event.target.value && keyCode === KeyCode.BACKSPACE) {\n        event.preventDefault();\n        var value = state.value;\n\n        if (value.length) {\n          _this.removeSelected(value[value.length - 1]);\n        }\n\n        return;\n      }\n\n      if (keyCode === KeyCode.DOWN) {\n        if (!state.open) {\n          _this.openIfHasChildren();\n\n          event.preventDefault();\n          event.stopPropagation();\n          return;\n        }\n      } else if (keyCode === KeyCode.ENTER && state.open) {\n        // Aviod trigger form submit when select item\n        // https://github.com/ant-design/ant-design/issues/10861\n        // https://github.com/ant-design/ant-design/issues/14544\n        if (isRealOpen || !combobox) {\n          event.preventDefault();\n        }\n      } else if (keyCode === KeyCode.ESC) {\n        if (state.open) {\n          _this.setOpenState(false);\n\n          event.preventDefault();\n          event.stopPropagation();\n        }\n\n        return;\n      }\n\n      if (isRealOpen && _this.selectTriggerRef) {\n        var menu = _this.selectTriggerRef.getInnerMenu();\n\n        if (menu && menu.onKeyDown(event, _this.handleBackfill)) {\n          event.preventDefault();\n          event.stopPropagation();\n        }\n      }\n    };\n\n    _this.onMenuSelect = function (_ref) {\n      var item = _ref.item;\n\n      if (!item) {\n        return;\n      }\n\n      var value = _this.state.value;\n      var props = _this.props;\n      var selectedValue = getValuePropValue(item);\n      var lastValue = value[value.length - 1];\n\n      _this.fireSelect(selectedValue);\n\n      if (isMultipleOrTags(props)) {\n        if (findIndexInValueBySingleValue(value, selectedValue) !== -1) {\n          return;\n        }\n\n        value = value.concat([selectedValue]);\n      } else {\n        if (!isCombobox(props) && lastValue !== undefined && lastValue === selectedValue && selectedValue !== _this.state.backfillValue) {\n          _this.setOpenState(false, true);\n\n          return;\n        }\n\n        value = [selectedValue];\n\n        _this.setOpenState(false, true);\n      }\n\n      _this.fireChange(value);\n\n      var inputValue = isCombobox(props) ? getPropValue(item, props.optionLabelProp) : '';\n\n      if (props.autoClearSearchValue) {\n        _this.setInputValue(inputValue, false);\n      }\n    };\n\n    _this.onMenuDeselect = function (_ref2) {\n      var item = _ref2.item,\n          domEvent = _ref2.domEvent;\n\n      if (domEvent.type === 'keydown' && domEvent.keyCode === KeyCode.ENTER) {\n        _this.removeSelected(getValuePropValue(item));\n\n        return;\n      }\n\n      if (domEvent.type === 'click') {\n        _this.removeSelected(getValuePropValue(item));\n      }\n\n      var props = _this.props;\n\n      if (props.autoClearSearchValue) {\n        _this.setInputValue('', false);\n      }\n    };\n\n    _this.onArrowClick = function (e) {\n      e.stopPropagation();\n      e.preventDefault();\n\n      if (!_this.props.disabled) {\n        _this.setOpenState(!_this.state.open, !_this.state.open);\n      }\n    };\n\n    _this.onPlaceholderClick = function () {\n      if (_this.getInputDOMNode && _this.getInputDOMNode()) {\n        _this.getInputDOMNode().focus();\n      }\n    };\n\n    _this.onOuterFocus = function (e) {\n      if (_this.props.disabled) {\n        e.preventDefault();\n        return;\n      }\n\n      _this.clearBlurTime();\n\n      if (!isMultipleOrTagsOrCombobox(_this.props) && e.target === _this.getInputDOMNode()) {\n        return;\n      }\n\n      if (_this._focused) {\n        return;\n      }\n\n      _this._focused = true;\n\n      _this.updateFocusClassName(); // only effect multiple or tag mode\n\n\n      if (!isMultipleOrTags(_this.props) || !_this._mouseDown) {\n        _this.timeoutFocus();\n      }\n    };\n\n    _this.onPopupFocus = function () {\n      // fix ie scrollbar, focus element again\n      _this.maybeFocus(true, true);\n    };\n\n    _this.onOuterBlur = function (e) {\n      if (_this.props.disabled) {\n        e.preventDefault();\n        return;\n      }\n\n      _this.blurTimer = window.setTimeout(function () {\n        _this._focused = false;\n\n        _this.updateFocusClassName();\n\n        var props = _this.props;\n        var value = _this.state.value;\n        var inputValue = _this.state.inputValue;\n\n        if (isSingleMode(props) && props.showSearch && inputValue && props.defaultActiveFirstOption) {\n          var options = _this._options || [];\n\n          if (options.length) {\n            var firstOption = findFirstMenuItem(options);\n\n            if (firstOption) {\n              value = [getValuePropValue(firstOption)];\n\n              _this.fireChange(value);\n            }\n          }\n        } else if (isMultipleOrTags(props) && inputValue) {\n          if (_this._mouseDown) {\n            // need update dropmenu when not blur\n            _this.setInputValue('');\n          } else {\n            // why not use setState?\n            // https://github.com/ant-design/ant-design/issues/14262\n            _this.state.inputValue = '';\n\n            if (_this.getInputDOMNode && _this.getInputDOMNode()) {\n              _this.getInputDOMNode().value = '';\n            }\n          }\n\n          var tmpValue = _this.getValueByInput(inputValue);\n\n          if (tmpValue !== undefined) {\n            value = tmpValue;\n\n            _this.fireChange(value);\n          }\n        } // if click the rest space of Select in multiple mode\n\n\n        if (isMultipleOrTags(props) && _this._mouseDown) {\n          _this.maybeFocus(true, true);\n\n          _this._mouseDown = false;\n          return;\n        }\n\n        _this.setOpenState(false);\n\n        if (props.onBlur) {\n          props.onBlur(_this.getVLForOnChange(value));\n        }\n      }, 10);\n    };\n\n    _this.onClearSelection = function (event) {\n      var props = _this.props;\n      var state = _this.state;\n\n      if (props.disabled) {\n        return;\n      }\n\n      var inputValue = state.inputValue;\n      var value = state.value;\n      event.stopPropagation();\n\n      if (inputValue || value.length) {\n        if (value.length) {\n          _this.fireChange([]);\n        }\n\n        _this.setOpenState(false, true);\n\n        if (inputValue) {\n          _this.setInputValue('');\n        }\n      }\n    };\n\n    _this.onChoiceAnimationLeave = function () {\n      _this.forcePopupAlign();\n    };\n\n    _this.getOptionInfoBySingleValue = function (value, optionsInfo) {\n      var info;\n      optionsInfo = optionsInfo || _this.state.optionsInfo;\n\n      if (optionsInfo[getMapKey(value)]) {\n        info = optionsInfo[getMapKey(value)];\n      }\n\n      if (info) {\n        return info;\n      }\n\n      var defaultLabel = value;\n\n      if (_this.props.labelInValue) {\n        var label = getLabelFromPropsValue(_this.props.value, value);\n\n        if (label !== undefined) {\n          defaultLabel = label;\n        }\n      }\n\n      var defaultInfo = {\n        option: React.createElement(Option, {\n          value: value,\n          key: value\n        }, value),\n        value: value,\n        label: defaultLabel\n      };\n      return defaultInfo;\n    };\n\n    _this.getOptionBySingleValue = function (value) {\n      var _this$getOptionInfoBy = _this.getOptionInfoBySingleValue(value),\n          option = _this$getOptionInfoBy.option;\n\n      return option;\n    };\n\n    _this.getOptionsBySingleValue = function (values) {\n      return values.map(function (value) {\n        return _this.getOptionBySingleValue(value);\n      });\n    };\n\n    _this.getValueByLabel = function (label) {\n      if (label === undefined) {\n        return null;\n      }\n\n      var value = null;\n      Object.keys(_this.state.optionsInfo).forEach(function (key) {\n        var info = _this.state.optionsInfo[key];\n        var disabled = info.disabled;\n\n        if (disabled) {\n          return;\n        }\n\n        var oldLable = toArray(info.label);\n\n        if (oldLable && oldLable.join('') === label) {\n          value = info.value;\n        }\n      });\n      return value;\n    };\n\n    _this.getVLBySingleValue = function (value) {\n      if (_this.props.labelInValue) {\n        return {\n          key: value,\n          label: _this.getLabelBySingleValue(value)\n        };\n      }\n\n      return value;\n    };\n\n    _this.getVLForOnChange = function (vlsS) {\n      var vls = vlsS;\n\n      if (vls !== undefined) {\n        if (!_this.props.labelInValue) {\n          vls = vls.map(function (v) {\n            return v;\n          });\n        } else {\n          vls = vls.map(function (vl) {\n            return {\n              key: vl,\n              label: _this.getLabelBySingleValue(vl)\n            };\n          });\n        }\n\n        return isMultipleOrTags(_this.props) ? vls : vls[0];\n      }\n\n      return vls;\n    };\n\n    _this.getLabelBySingleValue = function (value, optionsInfo) {\n      var _this$getOptionInfoBy2 = _this.getOptionInfoBySingleValue(value, optionsInfo),\n          label = _this$getOptionInfoBy2.label;\n\n      return label;\n    };\n\n    _this.getDropdownContainer = function () {\n      if (!_this.dropdownContainer) {\n        _this.dropdownContainer = document.createElement('div');\n        document.body.appendChild(_this.dropdownContainer);\n      }\n\n      return _this.dropdownContainer;\n    };\n\n    _this.getPlaceholderElement = function () {\n      var props = _this.props;\n      var state = _this.state;\n      var hidden = false;\n\n      if (state.inputValue) {\n        hidden = true;\n      }\n\n      var value = state.value;\n\n      if (value.length) {\n        hidden = true;\n      }\n\n      if (isCombobox(props) && value.length === 1 && state.value && !state.value[0]) {\n        hidden = false;\n      }\n\n      var placeholder = props.placeholder;\n\n      if (placeholder) {\n        return React.createElement(\"div\", _extends({\n          onMouseDown: preventDefaultEvent,\n          style: _extends({\n            display: hidden ? 'none' : 'block'\n          }, UNSELECTABLE_STYLE)\n        }, UNSELECTABLE_ATTRIBUTE, {\n          onClick: _this.onPlaceholderClick,\n          className: \"\".concat(props.prefixCls, \"-selection__placeholder\")\n        }), placeholder);\n      }\n\n      return null;\n    };\n\n    _this.getInputElement = function () {\n      var props = _this.props;\n      var defaultInput = React.createElement(\"input\", {\n        id: props.id,\n        autoComplete: \"off\"\n      }); // tslint:disable-next-line:typedef-whitespace\n\n      var inputElement = props.getInputElement ? props.getInputElement() : defaultInput;\n      var inputCls = classnames(inputElement.props.className, _defineProperty({}, \"\".concat(props.prefixCls, \"-search__field\"), true)); // https://github.com/ant-design/ant-design/issues/4992#issuecomment-281542159\n      // Add space to the end of the inputValue as the width measurement tolerance\n\n      return React.createElement(\"div\", {\n        className: \"\".concat(props.prefixCls, \"-search__field__wrap\")\n      }, React.cloneElement(inputElement, {\n        ref: _this.saveInputRef,\n        onChange: _this.onInputChange,\n        onKeyDown: chaining(_this.onInputKeyDown, inputElement.props.onKeyDown, _this.props.onInputKeyDown),\n        value: _this.state.inputValue,\n        disabled: props.disabled,\n        className: inputCls\n      }), React.createElement(\"span\", {\n        ref: _this.saveInputMirrorRef,\n        className: \"\".concat(props.prefixCls, \"-search__field__mirror\")\n      }, _this.state.inputValue, \"\\xA0\"));\n    };\n\n    _this.getInputDOMNode = function () {\n      return _this.topCtrlRef ? _this.topCtrlRef.querySelector('input,textarea,div[contentEditable]') : _this.inputRef;\n    };\n\n    _this.getInputMirrorDOMNode = function () {\n      return _this.inputMirrorRef;\n    };\n\n    _this.getPopupDOMNode = function () {\n      if (_this.selectTriggerRef) {\n        return _this.selectTriggerRef.getPopupDOMNode();\n      }\n    };\n\n    _this.getPopupMenuComponent = function () {\n      if (_this.selectTriggerRef) {\n        return _this.selectTriggerRef.getInnerMenu();\n      }\n    };\n\n    _this.setOpenState = function (open, needFocus) {\n      var props = _this.props;\n      var state = _this.state;\n\n      if (state.open === open) {\n        _this.maybeFocus(open, !!needFocus);\n\n        return;\n      }\n\n      if (_this.props.onDropdownVisibleChange) {\n        _this.props.onDropdownVisibleChange(open);\n      }\n\n      var nextState = {\n        open: open,\n        backfillValue: ''\n      }; // clear search input value when open is false in singleMode.\n\n      if (!open && isSingleMode(props) && props.showSearch) {\n        _this.setInputValue('', false);\n      }\n\n      if (!open) {\n        _this.maybeFocus(open, !!needFocus);\n      }\n\n      _this.setState(_extends({\n        open: open\n      }, nextState), function () {\n        if (open) {\n          _this.maybeFocus(open, !!needFocus);\n        }\n      });\n    };\n\n    _this.setInputValue = function (inputValue) {\n      var fireSearch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (inputValue !== _this.state.inputValue) {\n        _this.setState({\n          inputValue: inputValue\n        }, _this.forcePopupAlign);\n\n        if (fireSearch && _this.props.onSearch) {\n          _this.props.onSearch(inputValue);\n        }\n      }\n    };\n\n    _this.getValueByInput = function (str) {\n      var _this$props2 = _this.props,\n          multiple = _this$props2.multiple,\n          tokenSeparators = _this$props2.tokenSeparators;\n      var nextValue = _this.state.value;\n      var hasNewValue = false;\n      splitBySeparators(str, tokenSeparators).forEach(function (label) {\n        var selectedValue = [label];\n\n        if (multiple) {\n          var value = _this.getValueByLabel(label);\n\n          if (value && findIndexInValueBySingleValue(nextValue, value) === -1) {\n            nextValue = nextValue.concat(value);\n            hasNewValue = true;\n\n            _this.fireSelect(value);\n          }\n        } else if (findIndexInValueBySingleValue(nextValue, label) === -1) {\n          nextValue = nextValue.concat(selectedValue);\n          hasNewValue = true;\n\n          _this.fireSelect(label);\n        }\n      });\n      return hasNewValue ? nextValue : undefined;\n    };\n\n    _this.getRealOpenState = function (state) {\n      // tslint:disable-next-line:variable-name\n      var _open = _this.props.open;\n\n      if (typeof _open === 'boolean') {\n        return _open;\n      }\n\n      var open = (state || _this.state).open;\n      var options = _this._options || [];\n\n      if (isMultipleOrTagsOrCombobox(_this.props) || !_this.props.showSearch) {\n        if (open && !options.length) {\n          open = false;\n        }\n      }\n\n      return open;\n    };\n\n    _this.markMouseDown = function () {\n      _this._mouseDown = true;\n    };\n\n    _this.markMouseLeave = function () {\n      _this._mouseDown = false;\n    };\n\n    _this.handleBackfill = function (item) {\n      if (!_this.props.backfill || !(isSingleMode(_this.props) || isCombobox(_this.props))) {\n        return;\n      }\n\n      var key = getValuePropValue(item);\n\n      if (isCombobox(_this.props)) {\n        _this.setInputValue(key, false);\n      }\n\n      _this.setState({\n        value: [key],\n        backfillValue: key\n      });\n    };\n\n    _this.filterOption = function (input, child) {\n      var defaultFilter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : defaultFilterFn;\n      var value = _this.state.value;\n      var lastValue = value[value.length - 1];\n\n      if (!input || lastValue && lastValue === _this.state.backfillValue) {\n        return true;\n      }\n\n      var filterFn = _this.props.filterOption;\n\n      if ('filterOption' in _this.props) {\n        if (filterFn === true) {\n          filterFn = defaultFilter.bind(_assertThisInitialized(_this));\n        }\n      } else {\n        filterFn = defaultFilter.bind(_assertThisInitialized(_this));\n      }\n\n      if (!filterFn) {\n        return true;\n      } else if (typeof filterFn === 'function') {\n        return filterFn.call(_assertThisInitialized(_this), input, child);\n      } else if (child.props.disabled) {\n        return false;\n      }\n\n      return true;\n    };\n\n    _this.timeoutFocus = function () {\n      if (_this.focusTimer) {\n        _this.clearFocusTime();\n      }\n\n      _this.focusTimer = window.setTimeout(function () {\n        if (_this.props.onFocus) {\n          _this.props.onFocus();\n        }\n      }, 10);\n    };\n\n    _this.clearFocusTime = function () {\n      if (_this.focusTimer) {\n        clearTimeout(_this.focusTimer);\n        _this.focusTimer = null;\n      }\n    };\n\n    _this.clearBlurTime = function () {\n      if (_this.blurTimer) {\n        clearTimeout(_this.blurTimer);\n        _this.blurTimer = null;\n      }\n    };\n\n    _this.updateFocusClassName = function () {\n      var rootRef = _this.rootRef;\n      var props = _this.props; // avoid setState and its side effect\n\n      if (_this._focused) {\n        classes(rootRef).add(\"\".concat(props.prefixCls, \"-focused\"));\n      } else {\n        classes(rootRef).remove(\"\".concat(props.prefixCls, \"-focused\"));\n      }\n    };\n\n    _this.maybeFocus = function (open, needFocus) {\n      if (needFocus || open) {\n        var input = _this.getInputDOMNode();\n\n        var _document = document,\n            activeElement = _document.activeElement;\n\n        if (input && (open || isMultipleOrTagsOrCombobox(_this.props))) {\n          if (activeElement !== input) {\n            input.focus();\n            _this._focused = true;\n          }\n        } else if (activeElement !== _this.selectionRef && _this.selectionRef) {\n          _this.selectionRef.focus();\n\n          _this._focused = true;\n        }\n      }\n    };\n\n    _this.removeSelected = function (selectedKey, e) {\n      var props = _this.props;\n\n      if (props.disabled || _this.isChildDisabled(selectedKey)) {\n        return;\n      } // Do not trigger Trigger popup\n\n\n      if (e && e.stopPropagation) {\n        e.stopPropagation();\n      }\n\n      var oldValue = _this.state.value;\n      var value = oldValue.filter(function (singleValue) {\n        return singleValue !== selectedKey;\n      });\n      var canMultiple = isMultipleOrTags(props);\n\n      if (canMultiple) {\n        var event = selectedKey;\n\n        if (props.labelInValue) {\n          event = {\n            key: selectedKey,\n            label: _this.getLabelBySingleValue(selectedKey)\n          };\n        }\n\n        if (props.onDeselect) {\n          props.onDeselect(event, _this.getOptionBySingleValue(selectedKey));\n        }\n      }\n\n      _this.fireChange(value);\n    };\n\n    _this.openIfHasChildren = function () {\n      var props = _this.props;\n\n      if (React.Children.count(props.children) || isSingleMode(props)) {\n        _this.setOpenState(true);\n      }\n    };\n\n    _this.fireSelect = function (value) {\n      if (_this.props.onSelect) {\n        _this.props.onSelect(_this.getVLBySingleValue(value), _this.getOptionBySingleValue(value));\n      }\n    };\n\n    _this.fireChange = function (value) {\n      var props = _this.props;\n\n      if (!('value' in props)) {\n        _this.setState({\n          value: value\n        }, _this.forcePopupAlign);\n      }\n\n      var vls = _this.getVLForOnChange(value);\n\n      var options = _this.getOptionsBySingleValue(value);\n\n      if (props.onChange) {\n        props.onChange(vls, isMultipleOrTags(_this.props) ? options : options[0]);\n      }\n    };\n\n    _this.isChildDisabled = function (key) {\n      return childrenToArray(_this.props.children).some(function (child) {\n        var childValue = getValuePropValue(child);\n        return childValue === key && child.props && child.props.disabled;\n      });\n    };\n\n    _this.forcePopupAlign = function () {\n      if (!_this.state.open) {\n        return;\n      }\n\n      if (_this.selectTriggerRef && _this.selectTriggerRef.triggerRef) {\n        _this.selectTriggerRef.triggerRef.forcePopupAlign();\n      }\n    };\n\n    _this.renderFilterOptions = function () {\n      var inputValue = _this.state.inputValue;\n      var _this$props3 = _this.props,\n          children = _this$props3.children,\n          tags = _this$props3.tags,\n          filterOption = _this$props3.filterOption,\n          notFoundContent = _this$props3.notFoundContent;\n      var menuItems = [];\n      var childrenKeys = [];\n      var empty = false;\n\n      var options = _this.renderFilterOptionsFromChildren(children, childrenKeys, menuItems);\n\n      if (tags) {\n        // tags value must be string\n        var value = _this.state.value;\n        value = value.filter(function (singleValue) {\n          return childrenKeys.indexOf(singleValue) === -1 && (!inputValue || String(singleValue).indexOf(String(inputValue)) > -1);\n        }); // sort by length\n\n        value.sort(function (val1, val2) {\n          return val1.length - val2.length;\n        });\n        value.forEach(function (singleValue) {\n          var key = singleValue;\n          var menuItem = React.createElement(MenuItem, {\n            style: UNSELECTABLE_STYLE,\n            role: \"option\",\n            attribute: UNSELECTABLE_ATTRIBUTE,\n            value: key,\n            key: key\n          }, key);\n          options.push(menuItem);\n          menuItems.push(menuItem);\n        });\n\n        if (inputValue) {\n          var notFindInputItem = menuItems.every(function (option) {\n            // this.filterOption return true has two meaning,\n            // 1, some one exists after filtering\n            // 2, filterOption is set to false\n            // condition 2 does not mean the option has same value with inputValue\n            var filterFn = function filterFn() {\n              return getValuePropValue(option) === inputValue;\n            };\n\n            if (filterOption !== false) {\n              return !_this.filterOption.call(_assertThisInitialized(_this), inputValue, option, filterFn);\n            }\n\n            return !filterFn();\n          });\n\n          if (notFindInputItem) {\n            options.unshift(React.createElement(MenuItem, {\n              style: UNSELECTABLE_STYLE,\n              role: \"option\",\n              attribute: UNSELECTABLE_ATTRIBUTE,\n              value: inputValue,\n              key: inputValue\n            }, inputValue));\n          }\n        }\n      }\n\n      if (!options.length && notFoundContent) {\n        empty = true;\n        options = [React.createElement(MenuItem, {\n          style: UNSELECTABLE_STYLE,\n          attribute: UNSELECTABLE_ATTRIBUTE,\n          disabled: true,\n          role: \"option\",\n          value: \"NOT_FOUND\",\n          key: \"NOT_FOUND\"\n        }, notFoundContent)];\n      }\n\n      return {\n        empty: empty,\n        options: options\n      };\n    };\n\n    _this.renderFilterOptionsFromChildren = function (children, childrenKeys, menuItems) {\n      var sel = [];\n      var props = _this.props;\n      var inputValue = _this.state.inputValue;\n      var tags = props.tags;\n      React.Children.forEach(children, function (child) {\n        if (!child) {\n          return;\n        }\n\n        var type = child.type;\n\n        if (type.isSelectOptGroup) {\n          var label = child.props.label;\n          var key = child.key;\n\n          if (!key && typeof label === 'string') {\n            key = label;\n          } else if (!label && key) {\n            label = key;\n          } // Match option group label\n\n\n          if (inputValue && _this.filterOption(inputValue, child)) {\n            var innerItems = childrenToArray(child.props.children).map(function (subChild) {\n              var childValueSub = getValuePropValue(subChild) || subChild.key;\n              return React.createElement(MenuItem, _extends({\n                key: childValueSub,\n                value: childValueSub\n              }, subChild.props));\n            });\n            sel.push(React.createElement(MenuItemGroup, {\n              key: key,\n              title: label\n            }, innerItems)); // Not match\n          } else {\n            var _innerItems = _this.renderFilterOptionsFromChildren(child.props.children, childrenKeys, menuItems);\n\n            if (_innerItems.length) {\n              sel.push(React.createElement(MenuItemGroup, {\n                key: key,\n                title: label\n              }, _innerItems));\n            }\n          }\n\n          return;\n        }\n\n        warning(type.isSelectOption, 'the children of `Select` should be `Select.Option` or `Select.OptGroup`, ' + \"instead of `\".concat(type.name || type.displayName || child.type, \"`.\"));\n        var childValue = getValuePropValue(child);\n        validateOptionValue(childValue, _this.props);\n\n        if (_this.filterOption(inputValue, child)) {\n          var menuItem = React.createElement(MenuItem, _extends({\n            style: UNSELECTABLE_STYLE,\n            attribute: UNSELECTABLE_ATTRIBUTE,\n            value: childValue,\n            key: childValue,\n            role: \"option\"\n          }, child.props));\n          sel.push(menuItem);\n          menuItems.push(menuItem);\n        }\n\n        if (tags) {\n          childrenKeys.push(childValue);\n        }\n      });\n      return sel;\n    };\n\n    _this.renderTopControlNode = function () {\n      var _this$state = _this.state,\n          open = _this$state.open,\n          inputValue = _this$state.inputValue;\n      var value = _this.state.value;\n      var props = _this.props;\n      var choiceTransitionName = props.choiceTransitionName,\n          prefixCls = props.prefixCls,\n          maxTagTextLength = props.maxTagTextLength,\n          maxTagCount = props.maxTagCount,\n          showSearch = props.showSearch,\n          removeIcon = props.removeIcon;\n      var maxTagPlaceholder = props.maxTagPlaceholder;\n      var className = \"\".concat(prefixCls, \"-selection__rendered\"); // search input is inside topControlNode in single, multiple & combobox. 2016/04/13\n\n      var innerNode = null;\n\n      if (isSingleMode(props)) {\n        var selectedValue = null;\n\n        if (value.length) {\n          var showSelectedValue = false;\n          var opacity = 1;\n\n          if (!showSearch) {\n            showSelectedValue = true;\n          } else if (open) {\n            showSelectedValue = !inputValue;\n\n            if (showSelectedValue) {\n              opacity = 0.4;\n            }\n          } else {\n            showSelectedValue = true;\n          }\n\n          var singleValue = value[0];\n\n          var _this$getOptionInfoBy3 = _this.getOptionInfoBySingleValue(singleValue),\n              label = _this$getOptionInfoBy3.label,\n              title = _this$getOptionInfoBy3.title;\n\n          selectedValue = React.createElement(\"div\", {\n            key: \"value\",\n            className: \"\".concat(prefixCls, \"-selection-selected-value\"),\n            title: toTitle(title || label),\n            style: {\n              display: showSelectedValue ? 'block' : 'none',\n              opacity: opacity\n            }\n          }, label);\n        }\n\n        if (!showSearch) {\n          innerNode = [selectedValue];\n        } else {\n          innerNode = [selectedValue, React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-search \").concat(prefixCls, \"-search--inline\"),\n            key: \"input\",\n            style: {\n              display: open ? 'block' : 'none'\n            }\n          }, _this.getInputElement())];\n        }\n      } else {\n        var selectedValueNodes = [];\n        var limitedCountValue = value;\n        var maxTagPlaceholderEl;\n\n        if (maxTagCount !== undefined && value.length > maxTagCount) {\n          limitedCountValue = limitedCountValue.slice(0, maxTagCount);\n\n          var omittedValues = _this.getVLForOnChange(value.slice(maxTagCount, value.length));\n\n          var content = \"+ \".concat(value.length - maxTagCount, \" ...\");\n\n          if (maxTagPlaceholder) {\n            content = typeof maxTagPlaceholder === 'function' ? maxTagPlaceholder(omittedValues) : maxTagPlaceholder;\n          }\n\n          maxTagPlaceholderEl = React.createElement(\"li\", _extends({\n            style: UNSELECTABLE_STYLE\n          }, UNSELECTABLE_ATTRIBUTE, {\n            role: \"presentation\",\n            onMouseDown: preventDefaultEvent,\n            className: \"\".concat(prefixCls, \"-selection__choice \").concat(prefixCls, \"-selection__choice__disabled\"),\n            key: \"maxTagPlaceholder\",\n            title: toTitle(content)\n          }), React.createElement(\"div\", {\n            className: \"\".concat(prefixCls, \"-selection__choice__content\")\n          }, content));\n        }\n\n        if (isMultipleOrTags(props)) {\n          selectedValueNodes = limitedCountValue.map(function (singleValue) {\n            var info = _this.getOptionInfoBySingleValue(singleValue);\n\n            var content = info.label;\n            var title = info.title || content;\n\n            if (maxTagTextLength && typeof content === 'string' && content.length > maxTagTextLength) {\n              content = \"\".concat(content.slice(0, maxTagTextLength), \"...\");\n            }\n\n            var disabled = _this.isChildDisabled(singleValue);\n\n            var choiceClassName = disabled ? \"\".concat(prefixCls, \"-selection__choice \").concat(prefixCls, \"-selection__choice__disabled\") : \"\".concat(prefixCls, \"-selection__choice\");\n            return React.createElement(\"li\", _extends({\n              style: UNSELECTABLE_STYLE\n            }, UNSELECTABLE_ATTRIBUTE, {\n              onMouseDown: preventDefaultEvent,\n              className: choiceClassName,\n              role: \"presentation\",\n              key: singleValue || SELECT_EMPTY_VALUE_KEY,\n              title: toTitle(title)\n            }), React.createElement(\"div\", {\n              className: \"\".concat(prefixCls, \"-selection__choice__content\")\n            }, content), disabled ? null : React.createElement(\"span\", {\n              onClick: function onClick(event) {\n                _this.removeSelected(singleValue, event);\n              },\n              className: \"\".concat(prefixCls, \"-selection__choice__remove\")\n            }, removeIcon || React.createElement(\"i\", {\n              className: \"\".concat(prefixCls, \"-selection__choice__remove-icon\")\n            }, \"\\xD7\")));\n          });\n        }\n\n        if (maxTagPlaceholderEl) {\n          selectedValueNodes.push(maxTagPlaceholderEl);\n        }\n\n        selectedValueNodes.push(React.createElement(\"li\", {\n          className: \"\".concat(prefixCls, \"-search \").concat(prefixCls, \"-search--inline\"),\n          key: \"__input\"\n        }, _this.getInputElement()));\n\n        if (isMultipleOrTags(props) && choiceTransitionName) {\n          innerNode = React.createElement(Animate, {\n            onLeave: _this.onChoiceAnimationLeave,\n            component: \"ul\",\n            transitionName: choiceTransitionName\n          }, selectedValueNodes);\n        } else {\n          innerNode = React.createElement(\"ul\", null, selectedValueNodes);\n        }\n      }\n\n      return React.createElement(\"div\", {\n        className: className,\n        ref: _this.saveTopCtrlRef\n      }, _this.getPlaceholderElement(), innerNode);\n    };\n\n    var optionsInfo = Select.getOptionsInfoFromProps(props);\n    _this.state = {\n      value: Select.getValueFromProps(props, true),\n      inputValue: props.combobox ? Select.getInputValueForCombobox(props, optionsInfo, true) : '',\n      open: props.defaultOpen,\n      optionsInfo: optionsInfo,\n      backfillValue: '',\n      // a flag for aviod redundant getOptionsInfoFromProps call\n      skipBuildOptionsInfo: true,\n      ariaId: ''\n    };\n    _this.saveInputRef = saveRef(_assertThisInitialized(_this), 'inputRef');\n    _this.saveInputMirrorRef = saveRef(_assertThisInitialized(_this), 'inputMirrorRef');\n    _this.saveTopCtrlRef = saveRef(_assertThisInitialized(_this), 'topCtrlRef');\n    _this.saveSelectTriggerRef = saveRef(_assertThisInitialized(_this), 'selectTriggerRef');\n    _this.saveRootRef = saveRef(_assertThisInitialized(_this), 'rootRef');\n    _this.saveSelectionRef = saveRef(_assertThisInitialized(_this), 'selectionRef');\n    return _this;\n  }\n\n  _createClass(Select, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // when defaultOpen is true, we should auto focus search input\n      // https://github.com/ant-design/ant-design/issues/14254\n      if (this.props.autoFocus || this.state.open) {\n        this.focus();\n      }\n\n      this.setState({\n        ariaId: generateUUID()\n      });\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (isMultipleOrTags(this.props)) {\n        var inputNode = this.getInputDOMNode();\n        var mirrorNode = this.getInputMirrorDOMNode();\n\n        if (inputNode && inputNode.value && mirrorNode) {\n          inputNode.style.width = '';\n          inputNode.style.width = \"\".concat(mirrorNode.clientWidth, \"px\");\n        } else if (inputNode) {\n          inputNode.style.width = '';\n        }\n      }\n\n      this.forcePopupAlign();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.clearFocusTime();\n      this.clearBlurTime();\n\n      if (this.dropdownContainer) {\n        ReactDOM.unmountComponentAtNode(this.dropdownContainer);\n        document.body.removeChild(this.dropdownContainer);\n        this.dropdownContainer = null;\n      }\n    }\n  }, {\n    key: \"focus\",\n    value: function focus() {\n      if (isSingleMode(this.props) && this.selectionRef) {\n        this.selectionRef.focus();\n      } else if (this.getInputDOMNode()) {\n        this.getInputDOMNode().focus();\n      }\n    }\n  }, {\n    key: \"blur\",\n    value: function blur() {\n      if (isSingleMode(this.props) && this.selectionRef) {\n        this.selectionRef.blur();\n      } else if (this.getInputDOMNode()) {\n        this.getInputDOMNode().blur();\n      }\n    }\n  }, {\n    key: \"renderArrow\",\n    value: function renderArrow(multiple) {\n      var _this$props4 = this.props,\n          showArrow = _this$props4.showArrow,\n          loading = _this$props4.loading,\n          inputIcon = _this$props4.inputIcon,\n          prefixCls = _this$props4.prefixCls;\n\n      if (!showArrow) {\n        return null;\n      } // if loading  have loading icon\n\n\n      if (multiple && !loading) {\n        return null;\n      }\n\n      var defaultIcon = loading ? React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-arrow-loading\")\n      }) : React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-arrow-icon\")\n      });\n      return React.createElement(\"span\", _extends({\n        key: \"arrow\",\n        className: \"\".concat(prefixCls, \"-arrow\"),\n        style: UNSELECTABLE_STYLE\n      }, UNSELECTABLE_ATTRIBUTE, {\n        onClick: this.onArrowClick\n      }), inputIcon || defaultIcon);\n    }\n  }, {\n    key: \"renderClear\",\n    value: function renderClear() {\n      var _this$props5 = this.props,\n          prefixCls = _this$props5.prefixCls,\n          allowClear = _this$props5.allowClear,\n          clearIcon = _this$props5.clearIcon;\n      var inputValue = this.state.inputValue;\n      var value = this.state.value;\n      var clear = React.createElement(\"span\", _extends({\n        key: \"clear\",\n        className: \"\".concat(prefixCls, \"-selection__clear\"),\n        onMouseDown: preventDefaultEvent,\n        style: UNSELECTABLE_STYLE\n      }, UNSELECTABLE_ATTRIBUTE, {\n        onClick: this.onClearSelection\n      }), clearIcon || React.createElement(\"i\", {\n        className: \"\".concat(prefixCls, \"-selection__clear-icon\")\n      }, \"\\xD7\"));\n\n      if (!allowClear) {\n        return null;\n      }\n\n      if (isCombobox(this.props)) {\n        if (inputValue) {\n          return clear;\n        }\n\n        return null;\n      }\n\n      if (inputValue || value.length) {\n        return clear;\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _rootCls;\n\n      var props = this.props;\n      var multiple = isMultipleOrTags(props);\n      var state = this.state;\n      var className = props.className,\n          disabled = props.disabled,\n          prefixCls = props.prefixCls;\n      var ctrlNode = this.renderTopControlNode();\n      var _this$state2 = this.state,\n          open = _this$state2.open,\n          ariaId = _this$state2.ariaId;\n\n      if (open) {\n        var filterOptions = this.renderFilterOptions();\n        this._empty = filterOptions.empty;\n        this._options = filterOptions.options;\n      }\n\n      var realOpen = this.getRealOpenState();\n      var empty = this._empty;\n      var options = this._options || [];\n      var dataOrAriaAttributeProps = {};\n      Object.keys(props).forEach(function (key) {\n        if (Object.prototype.hasOwnProperty.call(props, key) && (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role')) {\n          dataOrAriaAttributeProps[key] = props[key];\n        }\n      }); // for (const key in props) {\n      //   if (\n      //     Object.prototype.hasOwnProperty.call(props, key) &&\n      //     (key.substr(0, 5) === 'data-' || key.substr(0, 5) === 'aria-' || key === 'role')\n      //   ) {\n      //     dataOrAriaAttributeProps[key] = props[key];\n      //   }\n      // }\n\n      var extraSelectionProps = _extends({}, dataOrAriaAttributeProps);\n\n      if (!isMultipleOrTagsOrCombobox(props)) {\n        extraSelectionProps = _extends({}, extraSelectionProps, {\n          onKeyDown: this.onKeyDown,\n          tabIndex: props.disabled ? -1 : props.tabIndex\n        });\n      }\n\n      var rootCls = (_rootCls = {}, _defineProperty(_rootCls, className, !!className), _defineProperty(_rootCls, prefixCls, 1), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-open\"), open), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-focused\"), open || !!this._focused), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-combobox\"), isCombobox(props)), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-disabled\"), disabled), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-enabled\"), !disabled), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-allow-clear\"), !!props.allowClear), _defineProperty(_rootCls, \"\".concat(prefixCls, \"-no-arrow\"), !props.showArrow), _rootCls);\n      return React.createElement(SelectTrigger, {\n        onPopupFocus: this.onPopupFocus,\n        onMouseEnter: this.props.onMouseEnter,\n        onMouseLeave: this.props.onMouseLeave,\n        dropdownAlign: props.dropdownAlign,\n        dropdownClassName: props.dropdownClassName,\n        dropdownMatchSelectWidth: props.dropdownMatchSelectWidth,\n        defaultActiveFirstOption: props.defaultActiveFirstOption,\n        dropdownMenuStyle: props.dropdownMenuStyle,\n        transitionName: props.transitionName,\n        animation: props.animation,\n        prefixCls: props.prefixCls,\n        dropdownStyle: props.dropdownStyle,\n        combobox: props.combobox,\n        showSearch: props.showSearch,\n        options: options,\n        empty: empty,\n        multiple: multiple,\n        disabled: disabled,\n        visible: realOpen,\n        inputValue: state.inputValue,\n        value: state.value,\n        backfillValue: state.backfillValue,\n        firstActiveValue: props.firstActiveValue,\n        onDropdownVisibleChange: this.onDropdownVisibleChange,\n        getPopupContainer: props.getPopupContainer,\n        onMenuSelect: this.onMenuSelect,\n        onMenuDeselect: this.onMenuDeselect,\n        onPopupScroll: props.onPopupScroll,\n        showAction: props.showAction,\n        ref: this.saveSelectTriggerRef,\n        menuItemSelectedIcon: props.menuItemSelectedIcon,\n        dropdownRender: props.dropdownRender,\n        ariaId: ariaId\n      }, React.createElement(\"div\", {\n        id: props.id,\n        style: props.style,\n        ref: this.saveRootRef,\n        onBlur: this.onOuterBlur,\n        onFocus: this.onOuterFocus,\n        className: classnames(rootCls),\n        onMouseDown: this.markMouseDown,\n        onMouseUp: this.markMouseLeave,\n        onMouseOut: this.markMouseLeave\n      }, React.createElement(\"div\", _extends({\n        ref: this.saveSelectionRef,\n        key: \"selection\",\n        className: \"\".concat(prefixCls, \"-selection\\n            \").concat(prefixCls, \"-selection--\").concat(multiple ? 'multiple' : 'single'),\n        role: \"combobox\",\n        \"aria-autocomplete\": \"list\",\n        \"aria-haspopup\": \"true\",\n        \"aria-controls\": ariaId,\n        \"aria-expanded\": realOpen\n      }, extraSelectionProps), ctrlNode, this.renderClear(), this.renderArrow(!!multiple))));\n    }\n  }]);\n\n  return Select;\n}(React.Component);\n\nSelect.propTypes = SelectPropTypes;\nSelect.defaultProps = {\n  prefixCls: 'rc-select',\n  defaultOpen: false,\n  labelInValue: false,\n  defaultActiveFirstOption: true,\n  showSearch: true,\n  allowClear: false,\n  placeholder: '',\n  onChange: noop,\n  onFocus: noop,\n  onBlur: noop,\n  onSelect: noop,\n  onSearch: noop,\n  onDeselect: noop,\n  onInputKeyDown: noop,\n  showArrow: true,\n  dropdownMatchSelectWidth: true,\n  dropdownStyle: {},\n  dropdownMenuStyle: {},\n  optionFilterProp: 'value',\n  optionLabelProp: 'value',\n  notFoundContent: 'Not Found',\n  backfill: false,\n  showAction: ['click'],\n  tokenSeparators: [],\n  autoClearSearchValue: true,\n  tabIndex: 0,\n  dropdownRender: function dropdownRender(menu) {\n    return menu;\n  }\n};\n\nSelect.getDerivedStateFromProps = function (nextProps, prevState) {\n  var optionsInfo = prevState.skipBuildOptionsInfo ? prevState.optionsInfo : Select.getOptionsInfoFromProps(nextProps, prevState);\n  var newState = {\n    optionsInfo: optionsInfo,\n    skipBuildOptionsInfo: false\n  };\n\n  if ('open' in nextProps) {\n    newState.open = nextProps.open;\n  }\n\n  if ('value' in nextProps) {\n    var value = Select.getValueFromProps(nextProps);\n    newState.value = value;\n\n    if (nextProps.combobox) {\n      newState.inputValue = Select.getInputValueForCombobox(nextProps, optionsInfo);\n    }\n  }\n\n  return newState;\n};\n\nSelect.getOptionsFromChildren = function (children) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n  React.Children.forEach(children, function (child) {\n    if (!child) {\n      return;\n    }\n\n    var type = child.type;\n\n    if (type.isSelectOptGroup) {\n      Select.getOptionsFromChildren(child.props.children, options);\n    } else {\n      options.push(child);\n    }\n  });\n  return options;\n};\n\nSelect.getInputValueForCombobox = function (props, optionsInfo, useDefaultValue) {\n  var value = [];\n\n  if ('value' in props && !useDefaultValue) {\n    value = toArray(props.value);\n  }\n\n  if ('defaultValue' in props && useDefaultValue) {\n    value = toArray(props.defaultValue);\n  }\n\n  if (value.length) {\n    value = value[0];\n  } else {\n    return '';\n  }\n\n  var label = value;\n\n  if (props.labelInValue) {\n    label = value.label;\n  } else if (optionsInfo[getMapKey(value)]) {\n    label = optionsInfo[getMapKey(value)].label;\n  }\n\n  if (label === undefined) {\n    label = '';\n  }\n\n  return label;\n};\n\nSelect.getLabelFromOption = function (props, option) {\n  return getPropValue(option, props.optionLabelProp);\n};\n\nSelect.getOptionsInfoFromProps = function (props, preState) {\n  var options = Select.getOptionsFromChildren(props.children);\n  var optionsInfo = {};\n  options.forEach(function (option) {\n    var singleValue = getValuePropValue(option);\n    optionsInfo[getMapKey(singleValue)] = {\n      option: option,\n      value: singleValue,\n      label: Select.getLabelFromOption(props, option),\n      title: option.props.title,\n      disabled: option.props.disabled\n    };\n  });\n\n  if (preState) {\n    // keep option info in pre state value.\n    var oldOptionsInfo = preState.optionsInfo;\n    var value = preState.value;\n\n    if (value) {\n      value.forEach(function (v) {\n        var key = getMapKey(v);\n\n        if (!optionsInfo[key] && oldOptionsInfo[key] !== undefined) {\n          optionsInfo[key] = oldOptionsInfo[key];\n        }\n      });\n    }\n  }\n\n  return optionsInfo;\n};\n\nSelect.getValueFromProps = function (props, useDefaultValue) {\n  var value = [];\n\n  if ('value' in props && !useDefaultValue) {\n    value = toArray(props.value);\n  }\n\n  if ('defaultValue' in props && useDefaultValue) {\n    value = toArray(props.defaultValue);\n  }\n\n  if (props.labelInValue) {\n    value = value.map(function (v) {\n      return v.key;\n    });\n  }\n\n  return value;\n};\n\nSelect.displayName = 'Select';\npolyfill(Select);\nexport default Select;"]},"metadata":{},"sourceType":"module"}